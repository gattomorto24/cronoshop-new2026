<!DOCTYPE html>
<html lang="it">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
Â  Â  <title>Cronoshop AI Ultimate</title>
Â  Â Â 
Â  Â  <!-- Phosphor Icons & Fonts -->
Â  Â  <script src="https://unpkg.com/@phosphor-icons/web"></script>
Â  Â  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Lora:ital,wght@0,400;0,600;1,400&family=Roboto+Mono:wght@400;600&display=swap" rel="stylesheet">

Â  Â  <style>
Â  Â  Â  Â  /* =========================================
Â  Â  Â  Â  Â  Â 1. CSS VARIABLES ENGINE
Â  Â  Â  Â  Â  Â ========================================= */
Â  Â  Â  Â  :root {
Â  Â  Â  Â  Â  Â  /* Default RGB Values (Light) */
Â  Â  Â  Â  Â  Â  --primary-rgb: 0, 122, 255;Â  Â  Â  /* #007AFF */
Â  Â  Â  Â  Â  Â  --bg-rgb: 242, 242, 247;Â  Â  Â  Â  Â /* #F2F2F7 */
Â  Â  Â  Â  Â  Â  --card-rgb: 255, 255, 255;Â  Â  Â  Â /* #FFFFFF */
Â  Â  Â  Â  Â  Â  --text-rgb: 0, 0, 0;Â  Â  Â  Â  Â  Â  Â /* #000000 */
Â  Â  Â  Â  Â  Â  --accent-rgb: 88, 86, 214;Â  Â  Â  Â /* #5856D6 */
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  /* Derived Colors */
Â  Â  Â  Â  Â  Â  --primary: rgb(var(--primary-rgb));
Â  Â  Â  Â  Â  Â  --bg-base: rgb(var(--bg-rgb));
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  /* Glass Engine Defaults (No Glass - Solid) */
Â  Â  Â  Â  Â  Â  --glass-bg: rgb(var(--card-rgb));
Â  Â  Â  Â  Â  Â  --glass-border: rgba(var(--text-rgb), 0.08);
Â  Â  Â  Â  Â  Â  --glass-blur: 0px;
Â  Â  Â  Â  Â  Â  --glass-shadow: 0px 4px 12px rgba(0,0,0,0.05);
Â  Â  Â  Â  Â  Â  --glass-saturate: 100%;

Â  Â  Â  Â  Â  Â  /* Text Colors */
Â  Â  Â  Â  Â  Â  --text-main: rgb(var(--text-rgb));
Â  Â  Â  Â  Â  Â  --text-sec: rgba(var(--text-rgb), 0.6);
Â  Â  Â  Â  Â  Â  --separator: rgba(var(--text-rgb), 0.12);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  /* Typography */
Â  Â  Â  Â  Â  Â  --font-main: 'Inter', sans-serif;
Â  Â  Â  Â  Â  Â  --base-size: 17px;
Â  Â  Â  Â  Â  Â  --font-weight-normal: 400;
Â  Â  Â  Â  Â  Â  --font-weight-bold: 600;

Â  Â  Â  Â  Â  Â  /* UI Utils */
Â  Â  Â  Â  Â  Â  --radius-md: 20px;
Â  Â  Â  Â  Â  Â  --ease: cubic-bezier(0.25, 1, 0.5, 1);
Â  Â  Â  Â  }

Â  Â  Â  Â  /* ULTRA GLASS MODE (Attivata da JS) */
Â  Â  Â  Â  body.glass-active {
Â  Â  Â  Â  Â  Â  --glass-bg: rgba(var(--card-rgb), 0.35);
Â  Â  Â  Â  Â  Â  --glass-border: rgba(255, 255, 255, 0.4);
Â  Â  Â  Â  Â  Â  --glass-blur: 30px;
Â  Â  Â  Â  Â  Â  --glass-saturate: 180%;
Â  Â  Â  Â  Â  Â  --glass-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  body.theme-dark.glass-active {
Â  Â  Â  Â  Â  Â  --glass-bg: rgba(30, 30, 30, 0.45);
Â  Â  Â  Â  Â  Â  --glass-border: rgba(255, 255, 255, 0.15);
Â  Â  Â  Â  }

Â  Â  Â  Â  body.theme-dark {
Â  Â  Â  Â  Â  Â  --glass-shadow: 0px 4px 20px rgba(0, 0, 0, 0.3);
Â  Â  Â  Â  }

Â  Â  Â  Â  /* RESET */
Â  Â  Â  Â  * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  body {
Â  Â  Â  Â  Â  Â  font-family: var(--font-main);
Â  Â  Â  Â  Â  Â  font-size: var(--base-size);
Â  Â  Â  Â  Â  Â  color: var(--text-main);
Â  Â  Â  Â  Â  Â  background-color: var(--bg-base);
Â  Â  Â  Â  Â  Â  background-image:Â 
Â  Â  Â  Â  Â  Â  Â  Â  radial-gradient(circle at 0% 0%, rgba(var(--primary-rgb), 0.15), transparent 50%),
Â  Â  Â  Â  Â  Â  Â  Â  radial-gradient(circle at 100% 100%, rgba(var(--accent-rgb), 0.15), transparent 50%);
Â  Â  Â  Â  Â  Â  background-attachment: fixed;
Â  Â  Â  Â  Â  Â  background-size: cover;
Â  Â  Â  Â  Â  Â  transition: background 0.4s, color 0.4s, font-size 0.3s;
Â  Â  Â  Â  Â  Â  overflow-x: hidden;
Â  Â  Â  Â  Â  Â  height: 100vh;
Â  Â  Â  Â  Â  Â  font-weight: var(--font-weight-normal);
Â  Â  Â  Â  }

Â  Â  Â  Â  body.glass-active {
Â  Â  Â  Â  Â  Â  background-image:Â 
Â  Â  Â  Â  Â  Â  Â  Â  radial-gradient(at 0% 0%, rgba(var(--primary-rgb), 0.6) 0px, transparent 50%),
Â  Â  Â  Â  Â  Â  Â  Â  radial-gradient(at 100% 0%, rgba(var(--accent-rgb), 0.6) 0px, transparent 50%),
Â  Â  Â  Â  Â  Â  Â  Â  radial-gradient(at 100% 100%, rgba(var(--primary-rgb), 0.6) 0px, transparent 50%),
Â  Â  Â  Â  Â  Â  Â  Â  radial-gradient(at 0% 100%, rgba(var(--accent-rgb), 0.6) 0px, transparent 50%),
Â  Â  Â  Â  Â  Â  Â  Â  radial-gradient(at 50% 50%, rgba(var(--card-rgb), 0.1) 0px, transparent 50%);
Â  Â  Â  Â  }

Â  Â  Â  Â  /* UTILS */
Â  Â  Â  Â  .ios-touch { cursor: pointer; transition: transform 0.1s; }
Â  Â  Â  Â  .ios-touch:active { transform: scale(0.96); opacity: 0.8; }
Â  Â  Â  Â  .hidden { display: none !important; }

Â  Â  Â  Â  /* LAYOUT */
Â  Â  Â  Â  .app-container { display: flex; height: 100vh; overflow: hidden; }

Â  Â  Â  Â  /* SIDEBAR */
Â  Â  Â  Â  .sidebar {
Â  Â  Â  Â  Â  Â  width: 280px; height: 100%; flex-shrink: 0;
Â  Â  Â  Â  Â  Â  background-color: var(--glass-bg);
Â  Â  Â  Â  Â  Â  backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturate));
Â  Â  Â  Â  Â  Â  -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturate));
Â  Â  Â  Â  Â  Â  border-right: 1px solid var(--glass-border);Â 
Â  Â  Â  Â  Â  Â  padding: 20px 16px;
Â  Â  Â  Â  Â  Â  display: flex; flex-direction: column; z-index: 100;
Â  Â  Â  Â  Â  Â  transition: transform 0.3s var(--ease), background 0.3s, border 0.3s;
Â  Â  Â  Â  }
Â  Â  Â  Â  @media (max-width: 1024px) {
Â  Â  Â  Â  Â  Â  .sidebar { position: fixed; inset: 0 auto 0 0; transform: translateX(-100%); width: 300px; box-shadow: 5px 0 30px rgba(0,0,0,0.15); }
Â  Â  Â  Â  Â  Â  .sidebar.active { transform: translateX(0); }
Â  Â  Â  Â  }

Â  Â  Â  Â  .brand-area { display: flex; align-items: center; gap: 12px; margin-bottom: 30px; padding: 0 8px; }
Â  Â  Â  Â  .brand-logo { width:36px; height:36px; border-radius:10px; display:flex; align-items:center; justify-content:center; color:white; background: linear-gradient(135deg, var(--primary), rgb(var(--accent-rgb))); font-size:1.2em; box-shadow: 0 4px 10px rgba(var(--primary-rgb), 0.3); }
Â  Â  Â  Â  .brand-title { font-size: 1.3em; font-weight: var(--font-weight-bold); letter-spacing: -0.5px; }

Â  Â  Â  Â  .nav-item {
Â  Â  Â  Â  Â  Â  display: flex; align-items: center; gap: 14px; padding: 12px 14px; margin-bottom: 4px;
Â  Â  Â  Â  Â  Â  border-radius: 16px; color: var(--text-main); font-weight: var(--font-weight-normal);
Â  Â  Â  Â  Â  Â  transition: 0.2s;
Â  Â  Â  Â  }
Â  Â  Â  Â  .nav-item:hover { background-color: rgba(var(--text-rgb), 0.05); }
Â  Â  Â  Â  .nav-item.active {Â 
Â  Â  Â  Â  Â  Â  background-color: rgba(var(--primary-rgb), 0.15);
Â  Â  Â  Â  Â  Â  color: var(--primary);Â 
Â  Â  Â  Â  Â  Â  font-weight: var(--font-weight-bold);Â 
Â  Â  Â  Â  Â  Â  backdrop-filter: blur(5px);
Â  Â  Â  Â  }
Â  Â  Â  Â  .nav-item i { font-size: 1.4em; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .menu-label { font-size: 0.8em; font-weight: var(--font-weight-bold); color: var(--text-sec); text-transform: uppercase; margin: 24px 0 8px 16px; letter-spacing: 0.5px; opacity: 0.8; }
Â  Â  Â  Â  .badge { background: #FF3B30; color: white; font-size: 0.75em; padding: 2px 8px; border-radius: 12px; margin-left: auto; display: none; font-weight: 600; box-shadow: 0 2px 5px rgba(255, 59, 48, 0.4); }

Â  Â  Â  Â  /* MAIN */
Â  Â  Â  Â  .main-wrapper { flex: 1; height: 100%; overflow-y: auto; padding: 20px; position: relative; scroll-behavior: smooth; }

Â  Â  Â  Â  /* HEADER */
Â  Â  Â  Â  .ios-header {
Â  Â  Â  Â  Â  Â  position: sticky; top: 10px; z-index: 90;
Â  Â  Â  Â  Â  Â  background-color: var(--glass-bg);Â 
Â  Â  Â  Â  Â  Â  backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturate));Â 
Â  Â  Â  Â  Â  Â  -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturate));
Â  Â  Â  Â  Â  Â  margin: 0 0 20px 0; padding: 12px 20px; border-radius: 20px;
Â  Â  Â  Â  Â  Â  display: flex; align-items: center; justify-content: space-between;
Â  Â  Â  Â  Â  Â  border: 1px solid var(--glass-border);
Â  Â  Â  Â  Â  Â  box-shadow: var(--glass-shadow);
Â  Â  Â  Â  Â  Â  transition: background 0.3s, border 0.3s, box-shadow 0.3s;
Â  Â  Â  Â  }
Â  Â  Â  Â  @media (max-width: 768px) {
Â  Â  Â  Â  Â  Â  .ios-header { top: 0; margin: -20px -20px 20px -20px; border-radius: 0 0 20px 20px; }
Â  Â  Â  Â  }

Â  Â  Â  Â  .mobile-menu-btn { display: none; font-size: 1.6em; color: var(--primary); background: none; border: none; padding:0; }
Â  Â  Â  Â  @media (max-width: 1024px) { .mobile-menu-btn { display: block; } }

Â  Â  Â  Â  .ios-search {
Â  Â  Â  Â  Â  Â  flex: 1; max-width: 400px; background-color: rgba(var(--text-rgb), 0.05);
Â  Â  Â  Â  Â  Â  border-radius: 14px; padding: 10px 14px; display: flex; align-items: center; gap: 10px; margin: 0 20px;
Â  Â  Â  Â  Â  Â  border: 1px solid transparent; transition: 0.2s;
Â  Â  Â  Â  }
Â  Â  Â  Â  .ios-search:focus-within {Â 
Â  Â  Â  Â  Â  Â  background-color: rgba(var(--card-rgb), 0.6);Â 
Â  Â  Â  Â  Â  Â  border-color: var(--primary);Â 
Â  Â  Â  Â  Â  Â  box-shadow: 0 4px 15px rgba(var(--primary-rgb), 0.15);Â 
Â  Â  Â  Â  Â  Â  backdrop-filter: blur(10px);
Â  Â  Â  Â  }
Â  Â  Â  Â  .ios-search input { border: none; background: transparent; font-size: 1em; width: 100%; outline: none; color: var(--text-main); font-family: inherit; }

Â  Â  Â  Â  /* VIEWS */
Â  Â  Â  Â  .view-section { display: none; animation: slideUp 0.4s var(--ease); }
Â  Â  Â  Â  .view-section.active { display: block; }
Â  Â  Â  Â  @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

Â  Â  Â  Â  /* AUTH STYLES (New) */
Â  Â  Â  Â  .auth-logo-area { display: flex; flex-direction: column; align-items: center; margin-bottom: 24px; }
Â  Â  Â  Â  .auth-logo-icon {Â 
Â  Â  Â  Â  Â  Â  width: 64px; height: 64px; border-radius: 18px;Â 
Â  Â  Â  Â  Â  Â  background: linear-gradient(135deg, var(--primary), rgb(var(--accent-rgb)));Â 
Â  Â  Â  Â  Â  Â  color: white; display: flex; align-items: center; justify-content: center;Â 
Â  Â  Â  Â  Â  Â  font-size: 32px; box-shadow: 0 10px 20px rgba(var(--primary-rgb), 0.3);
Â  Â  Â  Â  Â  Â  margin-bottom: 16px;
Â  Â  Â  Â  }
Â  Â  Â  Â  .auth-input-group { position: relative; width: 100%; margin-bottom: 12px; }
Â  Â  Â  Â  .auth-input {
Â  Â  Â  Â  Â  Â  width: 100%; padding: 16px; border-radius: 12px; border: 1px solid var(--separator);
Â  Â  Â  Â  Â  Â  background: rgba(var(--text-rgb), 0.02); color: var(--text-main); font-size: 1em; outline: none; transition: 0.3s;
Â  Â  Â  Â  }
Â  Â  Â  Â  .auth-input:focus { border-color: var(--primary); background: var(--glass-bg); box-shadow: 0 0 0 4px rgba(var(--primary-rgb), 0.1); }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /* Animazione Password Slide Down */
Â  Â  Â  Â  .password-section {
Â  Â  Â  Â  Â  Â  max-height: 0; overflow: hidden; opacity: 0; transition: all 0.5s cubic-bezier(0.25, 1, 0.5, 1);
Â  Â  Â  Â  }
Â  Â  Â  Â  .password-section.open { max-height: 100px; opacity: 1; margin-top: 12px; }

Â  Â  Â  Â  /* CARDS & GRID */
Â  Â  Â  Â  .hero-card {
Â  Â  Â  Â  Â  Â  background-color: var(--glass-bg); border-radius: var(--radius-md); overflow: hidden;
Â  Â  Â  Â  Â  Â  margin-bottom: 24px; box-shadow: var(--glass-shadow); position: relative; height: 320px;
Â  Â  Â  Â  Â  Â  border: 1px solid var(--glass-border);
Â  Â  Â  Â  Â  Â  backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturate));
Â  Â  Â  Â  }
Â  Â  Â  Â  .hero-overlay {
Â  Â  Â  Â  Â  Â  position: absolute; inset: 0;
Â  Â  Â  Â  Â  Â  background: linear-gradient(to top, rgba(0,0,0,0.8), transparent 60%);
Â  Â  Â  Â  Â  Â  padding: 30px; color: white; display: flex; flex-direction: column; justify-content: flex-end; align-items: flex-start;
Â  Â  Â  Â  }

Â  Â  Â  Â  .grid-layout { display: grid; grid-template-columns: repeat(auto-fill, minmax(170px, 1fr)); gap: 20px; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .product-card {
Â  Â  Â  Â  Â  Â  background-color: var(--glass-bg); border-radius: var(--radius-md); overflow: hidden;
Â  Â  Â  Â  Â  Â  box-shadow: var(--glass-shadow); display: flex; flex-direction: column; cursor: pointer;
Â  Â  Â  Â  Â  Â  border: 1px solid var(--glass-border); transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
Â  Â  Â  Â  Â  Â  backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturate));
Â  Â  Â  Â  }
Â  Â  Â  Â  .product-card:hover { transform: translateY(-6px) scale(1.02); z-index: 10; }
Â  Â  Â  Â  .product-img-wrap { padding-top: 100%; position: relative; background-color: rgba(var(--text-rgb), 0.03); }
Â  Â  Â  Â  .product-img { position: absolute; inset: 0; width: 100%; height: 100%; object-fit: contain; padding: 20px; transition: transform 0.3s; }
Â  Â  Â  Â  .product-card:hover .product-img { transform: scale(1.1); }
Â  Â  Â  Â  .product-details { padding: 16px; }
Â  Â  Â  Â  .product-name { font-size: 1em; font-weight: var(--font-weight-bold); margin-bottom: 6px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; height: 2.8em; }
Â  Â  Â  Â  .product-price { color: var(--primary); font-weight: var(--font-weight-bold); font-size: 1.1em; }

Â  Â  Â  Â  /* CHIPS */
Â  Â  Â  Â  .filter-scroll { display: flex; gap: 10px; overflow-x: auto; padding-bottom: 10px; margin-bottom: 20px; scrollbar-width: none; }
Â  Â  Â  Â  .ios-chip {
Â  Â  Â  Â  Â  Â  padding: 10px 20px; background-color: var(--glass-bg); border-radius: 50px; font-size: 0.9em; font-weight: 600;
Â  Â  Â  Â  Â  Â  box-shadow: var(--glass-shadow); white-space: nowrap; transition: 0.2s;Â 
Â  Â  Â  Â  Â  Â  border: 1px solid var(--glass-border); color: var(--text-main);
Â  Â  Â  Â  Â  Â  backdrop-filter: blur(var(--glass-blur));
Â  Â  Â  Â  }
Â  Â  Â  Â  .ios-chip.active {Â 
Â  Â  Â  Â  Â  Â  background-color: var(--text-main); color: var(--bg-base); border-color: transparent;Â 
Â  Â  Â  Â  Â  Â  box-shadow: 0 4px 12px rgba(var(--text-rgb), 0.3);
Â  Â  Â  Â  }

Â  Â  Â  Â  /* BUTTONS */
Â  Â  Â  Â  .ios-btn { width: 100%; padding: 16px; border-radius: 16px; font-size: 1em; font-weight: var(--font-weight-bold); cursor: pointer; border: none; transition: 0.2s; display: flex; justify-content: center; align-items: center; gap: 8px; }
Â  Â  Â  Â  .btn-primary { background: var(--primary); color: white; box-shadow: 0 4px 15px rgba(var(--primary-rgb), 0.4); }
Â  Â  Â  Â  .btn-primary:active { opacity: 0.8; transform: scale(0.98); }
Â  Â  Â  Â  .btn-secondary { background: rgba(var(--text-rgb), 0.08); color: var(--text-main); backdrop-filter: blur(10px); }
Â  Â  Â  Â  .btn-magic { background: linear-gradient(135deg, #FF2D55, #5856D6); color: white; box-shadow: 0 4px 15px rgba(255, 45, 85, 0.4); }
Â  Â  Â  Â  .btn-text { background: transparent; color: var(--primary); box-shadow: none; font-size: 0.9em; margin-top: 10px; }

Â  Â  Â  Â  /* SETTINGS & THEMES UI */
Â  Â  Â  Â  .settings-group {Â 
Â  Â  Â  Â  Â  Â  background: var(--glass-bg); border-radius: 20px; overflow: hidden; margin-bottom: 24px;Â 
Â  Â  Â  Â  Â  Â  box-shadow: var(--glass-shadow); border: 1px solid var(--glass-border);Â 
Â  Â  Â  Â  Â  Â  backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturate));Â 
Â  Â  Â  Â  }
Â  Â  Â  Â  .settings-row {Â 
Â  Â  Â  Â  Â  Â  display: flex; align-items: center; justify-content: space-between; padding: 18px 20px;Â 
Â  Â  Â  Â  Â  Â  border-bottom: 1px solid var(--glass-border); cursor: pointer; transition: background 0.2s;
Â  Â  Â  Â  }
Â  Â  Â  Â  .settings-row:last-child { border-bottom: none; }
Â  Â  Â  Â  .settings-row:hover { background: rgba(var(--text-rgb), 0.05); }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .theme-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 12px; padding: 20px; }
Â  Â  Â  Â  .theme-item {
Â  Â  Â  Â  Â  Â  display: flex; flex-direction: column; align-items: center; gap: 10px; cursor: pointer;
Â  Â  Â  Â  Â  Â  padding: 12px; border-radius: 16px; border: 2px solid transparent; transition: 0.2s;
Â  Â  Â  Â  }
Â  Â  Â  Â  .theme-item.active { border-color: var(--primary); background: rgba(var(--primary-rgb), 0.15); backdrop-filter: blur(5px); }
Â  Â  Â  Â  .theme-preview { width: 48px; height: 48px; border-radius: 50%; box-shadow: 0 4px 10px rgba(0,0,0,0.15); border: 2px solid white; position: relative; }
Â  Â  Â  Â  .theme-name { font-size: 0.8em; text-align: center; color: var(--text-sec); font-weight: 600; }

Â  Â  Â  Â  /* TOGGLES */
Â  Â  Â  Â  .switch-toggle { position: relative; width: 52px; height: 32px; }
Â  Â  Â  Â  .switch-toggle input { opacity: 0; width: 0; height: 0; }
Â  Â  Â  Â  .slider { position: absolute; cursor: pointer; inset: 0; background-color: rgba(var(--text-rgb), 0.2); border-radius: 34px; transition: .4s; }
Â  Â  Â  Â  .slider:before { position: absolute; content: ""; height: 24px; width: 24px; left: 4px; bottom: 4px; background-color: white; border-radius: 50%; transition: .4s; box-shadow: 0 2px 4px rgba(0,0,0,0.2); }
Â  Â  Â  Â  input:checked + .slider { background-color: var(--primary); }
Â  Â  Â  Â  input:checked + .slider:before { transform: translateX(20px); }

Â  Â  Â  Â  /* MODALS & OVERLAYS */
Â  Â  Â  Â  .modal-scrim, .sidebar-scrim { position: fixed; inset: 0; background: rgba(0,0,0,0.4); z-index: 2000; opacity: 0; pointer-events: none; transition: 0.3s; backdrop-filter: blur(8px); }
Â  Â  Â  Â  .modal-scrim.open, .sidebar-scrim.active { opacity: 1; pointer-events: auto; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .ios-modal {Â 
Â  Â  Â  Â  Â  Â  background: var(--glass-bg); width: 95%; max-width: 500px; border-radius: 24px; padding: 24px; max-height: 90vh; overflow-y: auto;Â 
Â  Â  Â  Â  Â  Â  transform: scale(0.9); transition: 0.3s var(--ease); box-shadow: var(--glass-shadow); position: absolute; top: 50%; left: 50%; translate: -50% -50%;Â 
Â  Â  Â  Â  Â  Â  border: 1px solid var(--glass-border); backdrop-filter: blur(40px) saturate(150%);
Â  Â  Â  Â  }
Â  Â  Â  Â  .modal-scrim.open .ios-modal { transform: scale(1); }

Â  Â  Â  Â  /* CHATBOT */
Â  Â  Â  Â  .chat-btn-float {Â 
Â  Â  Â  Â  Â  Â  position: fixed; bottom: 24px; right: 24px; width: 64px; height: 64px;Â 
Â  Â  Â  Â  Â  Â  background: linear-gradient(135deg, var(--primary), rgb(var(--accent-rgb)));Â 
Â  Â  Â  Â  Â  Â  border-radius: 50%; color: white; display: flex; align-items: center; justify-content: center;Â 
Â  Â  Â  Â  Â  Â  font-size: 32px; box-shadow: 0 10px 30px rgba(var(--primary-rgb), 0.4);Â 
Â  Â  Â  Â  Â  Â  border: none; z-index: 900; transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
Â  Â  Â  Â  }
Â  Â  Â  Â  .chat-btn-float:active { transform: scale(0.9); }

Â  Â  Â  Â  .chat-interface {Â 
Â  Â  Â  Â  Â  Â  position: fixed; bottom: 100px; right: 24px; width: 360px; height: 550px;Â 
Â  Â  Â  Â  Â  Â  background: var(--glass-bg);Â 
Â  Â  Â  Â  Â  Â  backdrop-filter: blur(40px) saturate(180%); -webkit-backdrop-filter: blur(40px) saturate(180%);
Â  Â  Â  Â  Â  Â  border-radius: 24px; box-shadow: 0 20px 60px rgba(0,0,0,0.25);Â 
Â  Â  Â  Â  Â  Â  z-index: 900; opacity: 0; pointer-events: none; transform: scale(0.9);
Â  Â  Â  Â  Â  Â  transition: opacity 0.3s, transform 0.3s;Â 
Â  Â  Â  Â  Â  Â  display: flex; flex-direction: column; border: 1px solid var(--glass-border);Â 
Â  Â  Â  Â  Â  Â  overflow: hidden; resize: both; min-width: 300px; min-height: 400px;
Â  Â  Â  Â  }
Â  Â  Â  Â  .chat-interface.open { opacity: 1; pointer-events: auto; transform: scale(1); }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .chat-nav {Â 
Â  Â  Â  Â  Â  Â  padding: 16px; cursor: move; user-select: none;
Â  Â  Â  Â  Â  Â  background: rgba(var(--text-rgb), 0.03); border-bottom: 1px solid var(--glass-border);
Â  Â  Â  Â  Â  Â  display: flex; justify-content: space-between; align-items: center; font-weight: 600;
Â  Â  Â  Â  }
Â  Â  Â  Â  .msg-bubble { max-width: 80%; padding: 12px 16px; border-radius: 20px; font-size: 0.95em; line-height: 1.5; margin-bottom: 10px; }
Â  Â  Â  Â  .msg-ai { background-color: rgba(var(--text-rgb), 0.06); color: var(--text-main); align-self: flex-start; border-bottom-left-radius: 4px; backdrop-filter: blur(5px); }
Â  Â  Â  Â  .msg-user { background: var(--primary); color: white; align-self: flex-end; border-bottom-right-radius: 4px; box-shadow: 0 4px 10px rgba(var(--primary-rgb), 0.3); }

Â  Â  Â  Â  /* USER PROFILE CARD IN SETTINGS */
Â  Â  Â  Â  .user-card-profile {
Â  Â  Â  Â  Â  Â  display: flex; align-items: center; gap: 15px; padding: 20px;
Â  Â  Â  Â  }
Â  Â  Â  Â  .user-avatar {
Â  Â  Â  Â  Â  Â  width: 60px; height: 60px; background: rgba(var(--text-rgb), 0.1); border-radius: 50%;
Â  Â  Â  Â  Â  Â  display: flex; align-items: center; justify-content: center; font-size: 1.5em; color: var(--text-sec);
Â  Â  Â  Â  }
Â  Â  </style>
</head>
<body>

<div class="app-container">
Â  Â  <div class="sidebar-scrim" id="sidebarScrim" onclick="app.toggleSidebar()"></div>
Â  Â  <aside class="sidebar" id="sidebar">
Â  Â  Â  Â  <div class="brand-area">
Â  Â  Â  Â  Â  Â  <div class="brand-logo"><i class="ph-bold ph-lightning"></i></div>
Â  Â  Â  Â  Â  Â  <span class="brand-title">Cronoshop</span>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="menu-group">
Â  Â  Â  Â  Â  Â  <div class="menu-label">Navigazione</div>
Â  Â  Â  Â  Â  Â  <div class="nav-item ios-touch active" id="nav-home" onclick="app.navigate('home')"><i class="ph ph-house"></i> Home</div>
Â  Â  Â  Â  Â  Â  <div class="nav-item ios-touch" id="nav-products" onclick="app.navigate('products')"><i class="ph ph-bag"></i> Prodotti</div>
Â  Â  Â  Â  Â  Â  <div class="nav-item ios-touch" onclick="app.toggleChat()"><i class="ph-fill ph-sparkle" style="color: var(--primary);"></i> CronoAI</div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="menu-group">
Â  Â  Â  Â  Â  Â  <div class="menu-label">Personale</div>
Â  Â  Â  Â  Â  Â  <div class="nav-item ios-touch" id="nav-wishlist" onclick="app.navigate('wishlist')"><i class="ph ph-heart"></i> Preferiti <span class="badge" id="badge-wishlist">0</span></div>
Â  Â  Â  Â  Â  Â  <div class="nav-item ios-touch" id="nav-cart" onclick="app.navigate('cart')"><i class="ph ph-shopping-cart"></i> Carrello <span class="badge" id="badge-cart">0</span></div>
Â  Â  Â  Â  Â  Â  <div class="nav-item ios-touch" id="nav-settings" onclick="app.navigate('settings')"><i class="ph ph-gear"></i> Impostazioni</div>
Â  Â  Â  Â  </div>
Â  Â  </aside>

Â  Â  <main class="main-wrapper">
Â  Â  Â  Â  <header class="ios-header">
Â  Â  Â  Â  Â  Â  <div style="display: flex; align-items: center;">
Â  Â  Â  Â  Â  Â  Â  Â  <button class="mobile-menu-btn" onclick="app.toggleSidebar()"><i class="ph ph-list"></i></button>
Â  Â  Â  Â  Â  Â  Â  Â  <span class="header-title" id="pageTitle" style="margin-left: 10px; font-weight: 700; font-size: 1.2em;">Home</span>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="ios-search" id="globalSearchContainer">
Â  Â  Â  Â  Â  Â  Â  Â  <i class="ph ph-magnifying-glass"></i>
Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="globalSearchInput" placeholder="Cerca...">
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="ios-touch" onclick="app.navigate('cart')" style="color: var(--primary); font-size: 1.5em; position: relative;">
Â  Â  Â  Â  Â  Â  Â  Â  <i class="ph ph-shopping-cart"></i>
Â  Â  Â  Â  Â  Â  Â  Â  <span class="badge" id="header-badge-cart" style="position: absolute; top: -5px; right: -5px; display: flex;">0</span>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </header>

Â  Â  Â  Â  <!-- HOME -->
Â  Â  Â  Â  <section id="view-home" class="view-section active">
Â  Â  Â  Â  Â  Â  <div class="hero-card ios-touch" onclick="app.openProductModal('labubu-special')">
Â  Â  Â  Â  Â  Â  Â  Â  <img src="https://m.media-amazon.com/images/I/717VqkMEolL._AC_SX679_.jpg" class="hero-img" style="width:100%; height:320px; object-fit:cover;" alt="Labubu">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="hero-overlay">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="background: rgba(255,255,255,0.25); backdrop-filter: blur(10px); padding: 6px 12px; border-radius: 8px; font-size: 0.8em; font-weight: 800; text-transform: uppercase; margin-bottom: 8px; display: inline-block;">Esclusiva</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 style="font-size: 2.2em; font-weight: 800; margin: 0; line-height: 1.1;">Collezione Labubu</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="margin: 8px 0 16px; font-size: 1.1em; opacity: 0.9;">I peluche piÃ¹ virali del 2025.</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="ios-btn btn-primary" style="width: auto; padding: 10px 24px;">Scopri Ora</button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <h2 style="margin-bottom: 16px; padding-left: 4px;">In Evidenza</h2>
Â  Â  Â  Â  Â  Â  <div class="grid-layout" id="homeGrid"></div>
Â  Â  Â  Â  </section>

Â  Â  Â  Â  <!-- PRODUCTS -->
Â  Â  Â  Â  <section id="view-products" class="view-section">
Â  Â  Â  Â  Â  Â  <div class="filter-scroll">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="ios-chip active" onclick="app.filterProducts('all', this)">Tutti</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="ios-chip" onclick="app.filterProducts('smartphone', this)">Smartphone</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="ios-chip" onclick="app.filterProducts('tech', this)">Tech</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="ios-chip" onclick="app.filterProducts('fashion', this)">Moda</div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="grid-layout" id="productsGrid"></div>
Â  Â  Â  Â  </section>

Â  Â  Â  Â  <!-- CART -->
Â  Â  Â  Â  <section id="view-cart" class="view-section">
Â  Â  Â  Â  Â  Â  <div id="cartListContainer"></div>
Â  Â  Â  Â  Â  Â  <div id="aiCartSuggestion" style="background:var(--glass-bg); padding:20px; border-radius:16px; margin: 20px 0; display:none; border:1px solid var(--primary);"></div>
Â  Â  Â  Â  Â  Â  <div id="cartSummary" class="settings-group" style="padding: 24px; display:none;">
Â  Â  Â  Â  Â  Â  Â  Â  <button class="ios-btn btn-magic" onclick="app.generateCartMix()"><i class="ph-fill ph-sparkle"></i> Crea Mix con AI</button>
Â  Â  Â  Â  Â  Â  Â  Â  <div style="height:1px; background:var(--separator); margin: 20px 0;"></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div style="display:flex; justify-content:space-between; margin-bottom:10px;"><span>Subtotale</span><span id="cartSubtotal">â‚¬0.00</span></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div style="display:flex; justify-content:space-between; font-weight:800; font-size:1.4em;"><span>Totale</span><span id="cartTotal">â‚¬0.00</span></div>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="ios-btn btn-primary" style="margin-top:20px;" onclick="alert('Checkout simulato!')">Paga Ora</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </section>

Â  Â  Â  Â  <!-- WISHLIST -->
Â  Â  Â  Â  <section id="view-wishlist" class="view-section">
Â  Â  Â  Â  Â  Â  <h2 style="margin-bottom:20px;">I miei preferiti</h2>
Â  Â  Â  Â  Â  Â  <div id="wishlistContainer" class="grid-layout"></div>
Â  Â  Â  Â  </section>

Â  Â  Â  Â  <!-- SETTINGS -->
Â  Â  Â  Â  <section id="view-settings" class="view-section" style="max-width:700px; margin:0 auto;">
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <div class="menu-label">Profilo</div>
Â  Â  Â  Â  Â  Â  <div class="settings-group">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="user-card-profile" id="userProfileCard">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <!-- Iniettato via JS -->
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div class="menu-label">Stile & Temi</div>
Â  Â  Â  Â  Â  Â  <div class="settings-group">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="settings-row" onclick="app.openAiPrompt('theme')">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="display:flex; align-items:center; gap:12px;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="width:32px; height:32px; background:linear-gradient(135deg, #FF0080, #7928CA); border-radius:8px; display:flex; align-items:center; justify-content:center; color:white;"><i class="ph-bold ph-paint-brush"></i></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="font-weight:600;">Crea Tema con AI</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <i class="ph-bold ph-caret-right" style="color:var(--text-sec);"></i>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="theme-grid" id="themeSelector"></div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div class="menu-label">AccessibilitÃ  & Display</div>
Â  Â  Â  Â  Â  Â  <div class="settings-group">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="settings-row" onclick="app.openAiPrompt('visual')">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="display:flex; align-items:center; gap:12px;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="width:32px; height:32px; background:var(--primary); border-radius:8px; display:flex; align-items:center; justify-content:center; color:white;"><i class="ph-bold ph-eye"></i></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="font-weight:600;">AI Visual Advisor</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="font-size:0.9em; color:var(--text-sec);">Ottimizza per me</span>
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="settings-row" style="cursor:default;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>Effetto Vetro</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="switch-toggle"><input type="checkbox" id="glassToggle" onchange="app.toggleGlass()"><span class="slider"></span></label>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  <div class="settings-row" style="cursor:default;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>Testo Grande</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="switch-toggle"><input type="checkbox" id="boldToggle" onchange="app.toggleBold()"><span class="slider"></span></label>
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="settings-row">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>Dimensione</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="display:flex; gap:8px;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="ios-btn btn-secondary" style="width:40px; padding:0;" onclick="app.adjustSize(-1)">A-</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="ios-btn btn-secondary" style="width:40px; padding:0;" onclick="app.adjustSize(1)">A+</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <button class="ios-btn btn-secondary" style="color: #FF3B30; margin-top:20px;" onclick="app.logout()">Esci dall'account</button>
Â  Â  Â  Â  </section>
Â  Â  </main>
</div>

<!-- AUTH MODAL (NEW) -->
<div class="modal-scrim" id="authDialog">
Â  Â  <div class="ios-modal" style="text-align: center;">
Â  Â  Â  Â  <div class="auth-logo-area">
Â  Â  Â  Â  Â  Â  <div class="auth-logo-icon"><i class="ph-bold ph-lightning"></i></div>
Â  Â  Â  Â  Â  Â  <h2 id="authTitle" style="font-weight:800; font-size:1.6em; margin-bottom:8px;">Accedi</h2>
Â  Â  Â  Â  Â  Â  <p id="authSubtitle" style="color:var(--text-sec);">Usa il tuo account Crono ID per accedere.</p>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <!-- Login / Email Check View -->
Â  Â  Â  Â  <div id="authStep1">
Â  Â  Â  Â  Â  Â  <input type="text" id="authInputIdentity" class="auth-input" placeholder="Email o Nome utente">
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <!-- Password scivola qui se l'account esiste -->
Â  Â  Â  Â  Â  Â  <div id="authPasswordSection" class="password-section">
Â  Â  Â  Â  Â  Â  Â  Â  <input type="password" id="authInputPassword" class="auth-input" placeholder="Password">
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <button class="ios-btn btn-primary" onclick="app.handleAuthStep()" style="margin-top:20px;">Continua</button>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <!-- Register View (Overlay stile) -->
Â  Â  Â  Â  <div id="authStep2" style="display:none; text-align:left;">
Â  Â  Â  Â  Â  Â  <p style="color:var(--text-sec); margin-bottom:20px; text-align:center;">Crea un nuovo Crono ID per accedere alle impostazioni.</p>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <div class="auth-input-group"><input type="text" id="regUser" class="auth-input" placeholder="Nome Utente"></div>
Â  Â  Â  Â  Â  Â  <div class="auth-input-group"><input type="email" id="regEmail" class="auth-input" placeholder="Email"></div>
Â  Â  Â  Â  Â  Â  <div class="auth-input-group"><input type="tel" id="regPhone" class="auth-input" placeholder="Numero di telefono (opzionale)"></div>
Â  Â  Â  Â  Â  Â  <div class="auth-input-group"><input type="password" id="regPass" class="auth-input" placeholder="Password"></div>
Â  Â  Â  Â  Â  Â  <div class="auth-input-group"><input type="password" id="regConfirm" class="auth-input" placeholder="Conferma Password"></div>

Â  Â  Â  Â  Â  Â  <button class="ios-btn btn-primary" onclick="app.finalizeRegistration()" style="margin-top:10px;">Crea Account</button>
Â  Â  Â  Â  Â  Â  <button class="ios-btn btn-text" onclick="app.resetAuthUI()">Indietro</button>
Â  Â  Â  Â  </div>
Â  Â  </div>
</div>

<!-- AI PROMPT MODAL -->
<div class="modal-scrim" id="aiPromptOverlay">
Â  Â  <div class="ios-modal ai-prompt-card">
Â  Â  Â  Â  <h3 style="margin-bottom:10px; display:flex; align-items:center; gap:8px;"><i class="ph-fill ph-sparkle" style="color:var(--primary);"></i> <span id="aiPromptTitle">AI Generator</span></h3>
Â  Â  Â  Â  <p style="color:var(--text-sec); margin-bottom:20px; line-height:1.4;" id="aiPromptDesc">Descrivi cosa vuoi...</p>
Â  Â  Â  Â  <textarea id="aiPromptInput" style="width:100%; height:100px; border-radius:12px; border:1px solid var(--separator); background:var(--bg-base); padding:12px; color:var(--text-main); font-family:inherit; resize:none; margin-bottom:20px;" placeholder="Es: 'Foresta autunnale al tramonto'"></textarea>
Â  Â  Â  Â  <div style="display:flex; gap:10px;">
Â  Â  Â  Â  Â  Â  <button class="ios-btn btn-secondary" onclick="app.closeAiPrompt()">Annulla</button>
Â  Â  Â  Â  Â  Â  <button class="ios-btn btn-primary" onclick="app.submitAiPrompt()">Genera</button>
Â  Â  Â  Â  </div>
Â  Â  </div>
</div>

<!-- PRODUCT MODAL -->
<div class="modal-scrim" id="productDialog" onclick="if(event.target===this) app.closeModal()">
Â  Â  <div class="ios-modal">
Â  Â  Â  Â  <div style="width:40px; height:5px; background:var(--separator); border-radius:3px; margin: -10px auto 20px;"></div>
Â  Â  Â  Â  <div style="display:flex; justify-content:space-between; margin-bottom:10px;">
Â  Â  Â  Â  Â  Â  <h2 id="modalTitle" style="font-size:1.5em; max-width:85%;"></h2>
Â  Â  Â  Â  Â  Â  <button onclick="app.closeModal()" style="background:rgba(var(--text-rgb),0.1); border:none; width:32px; height:32px; border-radius:50%;"><i class="ph-bold ph-x"></i></button>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <h3 id="modalPrice" style="color:var(--primary); font-size:1.4em; font-weight:800; margin-bottom:16px;"></h3>
Â  Â  Â  Â  <p id="modalDesc" style="color:var(--text-sec); line-height:1.6; margin-bottom:24px;"></p>
Â  Â  Â  Â Â 
Â  Â  Â  Â  <div id="aiResponse" style="background:var(--bg-base); padding:16px; border-radius:12px; margin-bottom:20px; display:none; border-left: 3px solid var(--primary);"></div>

Â  Â  Â  Â  <button class="ios-btn btn-primary" style="margin-bottom:12px;"><i class="ph-bold ph-amazon-logo"></i> Acquista su Amazon</button>
Â  Â  Â  Â  <div style="display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-bottom:12px;">
Â  Â  Â  Â  Â  Â  <button id="btnAddToCart" class="ios-btn btn-secondary"><i class="ph-bold ph-shopping-cart"></i> Aggiungi</button>
Â  Â  Â  Â  Â  Â  <button id="btnAddToWish" class="ios-btn btn-secondary"><i class="ph-bold ph-heart"></i> Preferiti</button>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <button class="ios-btn btn-magic" onclick="app.askAI()"><i class="ph-fill ph-sparkle"></i> Chiedi all'AI</button>
Â  Â  </div>
</div>

<!-- CHATBOT -->
<button class="chat-btn-float ios-touch" onclick="app.toggleChat()"><i class="ph-fill ph-chat-teardrop-text"></i></button>
<div class="chat-interface" id="chatOverlay">
Â  Â  <div class="chat-nav" id="chatHeader">
Â  Â  Â  Â  <div style="display:flex; align-items:center; gap:8px;"><i class="ph-fill ph-sparkle" style="color:var(--primary);"></i> CronoAI</div>
Â  Â  Â  Â  <div style="color:var(--primary); cursor:pointer;" onclick="app.toggleChat()">Chiudi</div>
Â  Â  </div>
Â  Â  <div class="chat-messages" style="flex:1; padding:20px; overflow-y:auto; display:flex; flex-direction:column;" id="chatBody">
Â  Â  Â  Â  <div class="msg-bubble msg-ai">Ciao! Sono qui per aiutarti. Puoi chiedermi di cambiare tema, aggiungere prodotti al carrello o consigli per i regali. ğŸ›ï¸</div>
Â  Â  </div>
Â  Â  <div style="padding:16px; background:var(--glass-bg); border-top:1px solid var(--glass-border); display:flex; gap:10px;">
Â  Â  Â  Â  <input type="text" id="chatInput" placeholder="Chiedi..." style="flex:1; height:44px; border-radius:22px; border:1px solid var(--separator); padding:0 16px; background:var(--bg-base); color:var(--text-main); outline:none;" onkeypress="if(event.key==='Enter') app.sendChat()">
Â  Â  Â  Â  <button onclick="app.sendChat()" style="width:44px; height:44px; border-radius:50%; background:var(--primary); color:white; border:none; display:flex; align-items:center; justify-content:center;"><i class="ph-bold ph-paper-plane-right"></i></button>
Â  Â  </div>
</div>

<script>
Â  Â  /* --- CONFIG --- */
Â  Â  const apiKey = "AIzaSyA0XCo1e2VyEDtA3ijXGm65rjRiMDrcQ1c";

Â  Â  /* --- DATA --- */
Â  Â const products = [
Â  {
Â  Â  id: "labubu-special",
Â  Â  link: "https://amzn.to/3JpXORG",
Â  Â  img: "public/labubu/717VqkMEolL._AC_SX679_.jpg",
Â  Â  nome: "ğŸ”¥ NOVITÃ€ - Collezione Labubu Peluche",
Â  Â  prezzo: 89.99,
Â  Â  prezzo_originale: 104.99,
Â  Â  sconto: 15,
Â  Â  descrizione: "I peluche piÃ¹ amati del momento! Adorabili Labubu della collezione esclusiva con design unico e qualitÃ  premium. Perfetti per collezionisti e regalo.",
Â  Â  categoria: "giocattoli",
Â  Â  featured: true,
Â  Â  isNew: true
Â  },
Â  {
Â  Â  id: "prod1",
Â  Â  link: "https://amzn.to/3Z551fa",
Â  Â  img: "https://m.media-amazon.com/images/I/61hiFJPpY9L._AC_SL1500_.jpg",
Â  Â  nome: "Samsung Galaxy S25 Ultra",
Â  Â  prezzo: 1199.00,
Â  Â  prezzo_originale: 1599.00,
Â  Â  sconto: 25,
Â  Â  descrizione: "Smartphone AI con display 6.9\" QHD+ Dynamic AMOLED 2X, fotocamera da 200MP, RAM 12GB, memoria interna da 256GB, batteria da 5000 mAh. Colore Titanium Silverblue. Garanzia 3 anni.",
Â  Â  categoria: "smartphone"
Â  },
Â  {
Â  Â  id: "prod2",
Â  Â  link: "https://amzn.to/4mB7UhK",
Â  Â  img: "https://m.media-amazon.com/images/I/71b8mpCMTOL._AC_SL1500_.jpg",
Â  Â  nome: "by Amazon Quinoa biologica, 500g",
Â  Â  prezzo: 5.49,
Â  Â  prezzo_originale: 6.99,
Â  Â  sconto: 21,
Â  Â  descrizione: "Quinoa biologica di alta qualitÃ , ricca di proteine e fibre. Perfetta per insalate e piatti salutari.",
Â  Â  categoria: "casa" // Categoria normalizzata
Â  },
Â  {
Â  Â  id: "prod3",
Â  Â  link: "https://www.amazon.it/dp/B0CHWV5HTM",
Â  Â  img: "https://m.media-amazon.com/images/I/71d7rfSl0wL._AC_SL1500_.jpg",
Â  Â  nome: "Apple iPhone 15 (128 GB)",
Â  Â  prezzo: 645.00,
Â  Â  prezzo_originale: 879.00,
Â  Â  sconto: 27,
Â  Â  descrizione: "Uno dei migliori smartphone per prestazioni e qualitÃ  fotografica, ora a un prezzo imbattibile. Display Super Retina XDR da 6,1 pollici e chip A16 Bionic.",
Â  Â  categoria: "smartphone"
Â  },
Â  {
Â  Â  id: "prod4",
Â  Â  link: "https://amzn.to/4kCH9aV",
Â  Â  img: "https://m.media-amazon.com/images/I/618ha2Ia5tL._AC_SL1500_.jpg",
Â  Â  nome: "Samsung Galaxy S25 Smartphone AI",
Â  Â  prezzo: 929.00,
Â  Â  prezzo_originale: 1129.00,
Â  Â  sconto: 18,
Â  Â  descrizione: "Smartphone con display 6.2'' FHD+ Dynamic AMOLED 2X, fotocamera da 50MP, RAM 12GB, memoria interna 256GB, batteria da 4.000 mAh. Include 3 anni di garanzia. Colore: Mint.",
Â  Â  categoria: "smartphone"
Â  },
Â  {
Â  Â  id: "prod5",
Â  Â  link: "https://amzn.to/3ZAt8T4",
Â  Â  img: "https://m.media-amazon.com/images/I/61Wj-1t3TwL._AC_SL1500_.jpg",
Â  Â  nome: "SAMSUNG Galaxy S25 Edge (512 GB)",
Â  Â  prezzo: 1299.00,
Â  Â  prezzo_originale: 1549.00,
Â  Â  sconto: 16,
Â  Â  descrizione: "Smartphone AI con display 6.7'' QHD+ Dynamic AMOLED 2X, fotocamera da 200MP, RAM 12GB, memoria interna da 512GB, batteria da 3.900 mAh. Include 3 anni di garanzia. Colore: Titanium Jetblack.",
Â  Â  categoria: "smartphone"
Â  },
Â  {
Â  Â  id: "prod6",
Â  Â  link: "https://amzn.to/45gPEUX",
Â  Â  img: "https://m.media-amazon.com/images/I/61y0hmQWlsL._AC_SL1500_.jpg",
Â  Â  nome: "Samsung Galaxy S25+ Smartphone AI (512 GB)",
Â  Â  prezzo: 1189.00,
Â  Â  prezzo_originale: 1399.00,
Â  Â  sconto: 15,
Â  Â  descrizione: "Smartphone AI con display 6.7'' QHD+ Dynamic AMOLED 2X, fotocamera da 50MP, RAM 12GB, memoria interna da 512GB, batteria da 4.900 mAh. Include 3 anni di garanzia. Colore: Silver Shadow. Versione italiana.",
Â  Â  categoria: "smartphone"
Â  },
Â  {
Â  Â  id: "prod7",
Â  Â  link: "https://amzn.to/3Z6Kc2W",
Â  Â  img: "https://m.media-amazon.com/images/I/610vqacJO2L.__AC_SY445_SX342_QL70_ML2_.jpg",
Â  Â  nome: "Apple iPhone 16e â€“ 128 GB - Bianco",
Â  Â  prezzo: 699.00,
Â  Â  prezzo_originale: 829.00,
Â  Â  sconto: 16,
Â  Â  descrizione: "Progettato per Apple Intelligence, dotato di chip A18, autonomia grandiosa, fotocamera Fusion da 48MP e display Super Retina XDR da 6,1\".",
Â  Â  categoria: "smartphone"
Â  },
Â  {
Â  Â  id: "prod8",
Â  Â  link: "https://amzn.to/3ZEqKut",
Â  Â  img: "https://m.media-amazon.com/images/I/61cUeqowwZL._AC_SL1500_.jpg",
Â  Â  nome: "Apple iPhone 16 Pro Max â€“ 256 GB - Titanio Nero",
Â  Â  prezzo: 1195.00,
Â  Â  prezzo_originale: 1489.00,
Â  Â  sconto: 20,
Â  Â  descrizione: "Telefono 5G con controllo fotocamera avanzato, registrazione video Dolby Vision 4K a 120 fps e autonomia senza precedenti. Compatibile con AirPods.",
Â  Â  categoria: "smartphone"
Â  },
Â  {
Â  Â  id: "prod9",
Â  Â  link: "https://amzn.to/43t1D0l",
Â  Â  img: "https://m.media-amazon.com/images/I/61BGE6iu4AL.__AC_SY445_SX342_QL70_ML2_.jpg",
Â  Â  nome: "Apple iPhone 14 Plus â€“ 128 GB - Azzurro",
Â  Â  prezzo: 871.00,
Â  Â  prezzo_originale: 1029.00,
Â  Â  sconto: 15,
Â  Â  descrizione: "Smartphone Apple con 128 GB di memoria, display Super Retina XDR da 6,7\", ottime prestazioni e autonomia. Un mix di potenza e stile.",
Â  Â  categoria: "smartphone"
Â  },
Â  {
Â  Â  id: "prod10",
Â  Â  link: "https://amzn.to/4mBncTC",
Â  Â  img: "https://m.media-amazon.com/images/I/51v1hYXGsdL._AC_SL1500_.jpg",
Â  Â  nome: "Google Pixel 9 Pro XL (128 GB) - Grigio Verde",
Â  Â  prezzo: 879.00,
Â  Â  prezzo_originale: 1099.00,
Â  Â  sconto: 20,
Â  Â  descrizione: "Smartphone Android sbloccato con Gemini, sistema a tripla fotocamera posteriore, batteria con autonomia fino a 24 ore e display Super Actua da 6,8\".",
Â  Â  categoria: "smartphone"
Â  },
Â  {
Â  Â  id: "prod11", // ID duplicato, lo rendo unico
Â  Â  link: "https://amzn.to/4mBncTC",
Â  Â  img: "https://m.media-amazon.com/images/I/51v1hYXGsdL._AC_SL1500_.jpg",
Â  Â  nome: "Google Pixel 9 Pro XL (256 GB) - Grigio Verde",
Â  Â  prezzo: 949.00,
Â  Â  prezzo_originale: 1199.00,
Â  Â  sconto: 21,
Â  Â  descrizione: "Versione potenziata con 256GB. Smartphone Android sbloccato con Gemini, tripla fotocamera posteriore, batteria a lunga durata e display Super Actua da 6,8\".",
Â  Â  categoria: "smartphone"
Â  },
Â  {
Â  Â  id: "prod12",
Â  Â  link: "https://amzn.to/4jlRfvO",
Â  Â  img: "https://m.media-amazon.com/images/I/71yzJoE7WlL._AC_SL1500_.jpg",
Â  Â  nome: "Apple iPhone 14 Pro Max â€“ 128 GB (Ricondizionato)",
Â  Â  prezzo: 689.00,
Â  Â  prezzo_originale: 950.00,
Â  Â  sconto: 27,
Â  Â  descrizione: "iPhone 14 Pro Max ricondizionato in ottime condizioni, con 128 GB di memoria e finitura Deep Purple. La qualitÃ  Apple con un ottimo risparmio.",
Â  Â  categoria: "smartphone"
Â  },
Â  {
Â  Â  id: "prod13",
Â  Â  link: "https://amzn.eu/d/j40eOtX",
Â  Â  img: "https://m.media-amazon.com/images/I/619HAuZ95QL._AC_SL1500_.jpg",
Â  Â  nome: "iPhone 16 (128GB) - Nero",
Â  Â  prezzo: 759.00,
Â  Â  prezzo_originale: 929.00,
Â  Â  sconto: 18,
Â  Â  descrizione: "Il nuovo standard di Apple, con prestazioni eccezionali, un sistema di fotocamere rivoluzionario e un design elegante e resistente.",
Â  Â  categoria: "smartphone"
Â  },
Â  {
Â  Â  id: "prod14",
Â  Â  link: "https://amzn.to/3SnXwfz",
Â  Â  img: "https://m.media-amazon.com/images/I/41sNR0PJCaL._AC_SX569_.jpg",
Â  Â  nome: "SSC NAPOLI Maglietta Campioni",
Â  Â  prezzo: 30.00,
Â  Â  prezzo_originale: 45.00,
Â  Â  sconto: 33,
Â  Â  descrizione: "Maglia ufficiale celebrativa per i veri tifosi del Napoli. Mostra il tuo orgoglio con questa t-shirt di alta qualitÃ .",
Â  Â  categoria: "fashion"
Â  },
Â  {
Â  Â  id: "prod15",
Â  Â  link: "https://amzn.to/4kbOb6E",
Â  Â  img: "https://m.media-amazon.com/images/I/71BHou6YJKL._AC_SY879_.jpg",
Â  Â  nome: "Calvin Klein T-Shirt Uomo in Cotone",
Â  Â  prezzo: 18.00,
Â  Â  prezzo_originale: 35.00,
Â  Â  sconto: 49,
Â  Â  descrizione: "Un classico intramontabile per ogni guardaroba. Stile minimalista, 100% cotone per il massimo comfort.",
Â  Â  categoria: "fashion"
Â  },
Â  {
Â  Â  id: "prod16",
Â  Â  link: "https://amzn.to/43xa5u6",
Â  Â  img: "https://m.media-amazon.com/images/I/51V1TTs1U2L._AC_SX569_.jpg",
Â  Â  nome: "adidas Squadra 25 Jersey T-Shirt Uomo",
Â  Â  prezzo: 14.99,
Â  Â  prezzo_originale: 23.00,
Â  Â  sconto: 35,
Â  Â  descrizione: "T-shirt sportiva da uomo, perfetta per allenamento e tempo libero. Tessuto traspirante per performance ottimali.",
Â  Â  categoria: "fashion"
Â  },
Â  {
Â  Â  id: "prod17",
Â  Â  link: "https://www.amazon.it/dp/B0F1P4F8SR/",
Â  Â  img: "https://m.media-amazon.com/images/I/71GSwlTsPDL.__AC_SX300_SY300_QL70_ML2_.jpg",
Â  Â  nome: "Sunsilk Crema Styling Capelli Mossi",
Â  Â  prezzo: 5.99,
Â  Â  prezzo_originale: 32.34,
Â  Â  sconto: 81,
Â  Â  descrizione: "Crema per lo styling dei capelli mossi, Onde Meravigliose. Effetto anticrespo a lunga durata per una chioma sempre perfetta.",
Â  Â  categoria: "salute"
Â  },
Â  {
Â  Â  id: "prod18",
Â  Â  link: "https://amzn.to/4kGcGJg",
Â  Â  img: "https://m.media-amazon.com/images/I/6171T++Z2mL._AC_SL1095_.jpg",
Â  Â  nome: "CaffÃ¨ Borbone Cialda Compostabile, Miscela Oro - 100 Cialde",
Â  Â  prezzo: 15.19,
Â  Â  prezzo_originale: 22.34,
Â  Â  sconto: 32,
Â  Â  descrizione: "L'aroma intenso e il gusto equilibrato della miscela Oro, in pratiche cialde compostabili. 100% compatibili.",
Â  Â  categoria: "casa"
Â  },
Â  {
Â  Â  id: "prod19",
Â  Â  link: "https://amzn.to/3Fbh43W",
Â  Â  img: "https://m.media-amazon.com/images/I/8120xtA5GaL._AC_SL1500_.jpg",
Â  Â  nome: "King C. Gillette Kit Regolabarba Uomo",
Â  Â  prezzo: 27.37,
Â  Â  prezzo_originale: 39.99,
Â  Â  sconto: 32,
Â  Â  descrizione: "Kit professionale per la cura della barba: include testina, 3 pettini regolatori, spazzolina e caricatore. Un'ottima idea regalo.",
Â  Â  categoria: "salute"
Â  },
Â  {
Â  Â  id: "prod20",
Â  Â  link: "https://amzn.to/3Ssmcnb",
Â  Â  img: "https://m.media-amazon.com/images/I/31SLM5sJK4L.__AC_SY300_SX300_QL70_ML2_.jpg",
Â  Â  nome: "Samsung Galaxy S24 Ultra â€“ 12GB / 256GB - Black",
Â  Â  prezzo: 864.90,
Â  Â  prezzo_originale: 1499.00,
Â  Â  sconto: 42,
Â  Â  descrizione: "Smartphone top di gamma Samsung, 12GB RAM, 256GB memoria. Prestazioni estreme e design premium in colorazione Phantom Black.",
Â  Â  categoria: "smartphone"
Â  },
Â  {
Â  Â  id: "prod21",
Â  Â  link: "https://amzn.to/3SUojjE",
Â  Â  img: "https://m.media-amazon.com/images/I/812azAWbm2L.__AC_SX300_SY300_QL70_ML2_.jpg",
Â  Â  nome: "Oral-B Testine Di Ricambio Originali (10 pezzi)",
Â  Â  prezzo: 24.99,
Â  Â  prezzo_originale: 39.99,
Â  Â  sconto: 38,
Â  Â  descrizione: "Confezione da 10 testine Pro Cross Action per spazzolino elettrico Oral-B. Ricambio originale per una pulizia profonda.",
Â  Â  categoria: "salute"
Â  },
Â  {
Â  Â  id: "prod22",
Â  Â  link: "https://amzn.to/4jhgwHr",
Â  Â  img: "https://m.media-amazon.com/images/I/51B45gaTgjL._AC_SL1000_.jpg",
Â  Â  nome: "Amazon Fire TV Stick HD (Ultimo modello)",
Â  Â  prezzo: 28.99,
Â  Â  prezzo_originale: 49.99,
Â  Â  sconto: 42,
Â  Â  descrizione: "Streaming HD con TV gratuita e in diretta, telecomando vocale Alexa e controlli per la Casa Intelligente.",
Â  Â  categoria: "tech"
Â  },
Â  {
Â  Â  id: "prod23",
Â  Â  link: "https://amzn.to/4dCu1QL",
Â  Â  img: "https://m.media-amazon.com/images/I/618HDC8rPXL.__AC_SX300_SY300_QL70_ML2_.jpg",
Â  Â  nome: "BronziÂ® Portafoglio Uomo Slim con Protezione RFID",
Â  Â  prezzo: 22.99,
Â  Â  prezzo_originale: 29.99,
Â  Â  sconto: 23,
Â  Â  descrizione: "Portacarte uomo e donna, portatessere con protezione RFID, porta carte di credito e portamonete. Mini, slim, con box regalo.",
Â  Â  categoria: "fashion"
Â  },
Â  {
Â  Â  id: "prod24",
Â  Â  link: "https://amzn.to/4kEfeHI",
Â  Â  img: "https://m.media-amazon.com/images/I/61oxHY8kFbL._AC_SX569_.jpg",
Â  Â  nome: "Vittorio Y Camicia Donna in Cotone e Lino",
Â  Â  prezzo: 19.99,
Â  Â  prezzo_originale: 28.99,
Â  Â  sconto: 31,
Â  Â  descrizione: "Camicia casual a tinta unita, comoda e traspirante, perfetta per la stagione calda. Resi gratuiti su Amazon.",
Â  Â  categoria: "fashion"
Â  },
Â  {
Â  Â  id: "prod25",
Â  Â  link: "https://amzn.to/4dF2SwD",
Â  Â  img: "https://m.media-amazon.com/images/I/618FhFPg8+L._AC_SX575_.jpg",
Â  Â  nome: "Nike Air Force 1 '07 Lv8 4",
Â  Â  prezzo: 116.00,
Â  Â  prezzo_originale: 140.00,
Â  Â  sconto: 17,
Â  Â  descrizione: "Scarpe da basket da uomo, modello iconico Nike Air Force 1 con design classico e comfort duraturo.",
Â  Â  categoria: "fashion"
Â  },
Â  // Continuo a processare e standardizzare tutti gli altri prodotti...
Â  {
Â  Â  id: "prod26",
Â  Â  link: "https://amzn.to/3Z7S8Rr",
Â  Â  img: "https://m.media-amazon.com/images/I/41vC0GMKWJL._AC_SY695_.jpg",
Â  Â  nome: "adidas Breaknet Lifestyle Court Lace Shoes Bambino",
Â  Â  prezzo: 28.80,
Â  Â  prezzo_originale: 45.00,
Â  Â  sconto: 36,
Â  Â  descrizione: "Scarpe da tennis unisex per bambini e ragazzi. Offerta a tempo con un notevole risparmio.",
Â  Â  categoria: "fashion"
Â  },
Â  {
Â  Â  id: "prod27",
Â  Â  link: "https://amzn.to/4dCt9LX",
Â  Â  img: "https://m.media-amazon.com/images/I/71XHPuLiHVL._AC_SY606_.jpg",
Â  Â  nome: "Nike Everyday Cush Crew Calze Uomo (Pacco da 3)",
Â  Â  prezzo: 14.99,
Â  Â  prezzo_originale: 19.99,
Â  Â  sconto: 25,
Â  Â  descrizione: "Calze da uomo Nike, modello Everyday Cush Crew, ideali per comfort quotidiano e performance sportive.",
Â  Â  categoria: "fashion"
Â  },
Â  {
Â  Â  id: "prod28",
Â  Â  link: "https://amzn.to/4kFlpLJ",
Â  Â  img: "https://m.media-amazon.com/images/I/71ZfLtLMYyL._AC_SX679_.jpg",
Â  Â  nome: "Smart Sir Calzini Sportivi Uomo e Donna (4 paia)",
Â  Â  prezzo: 9.49,
Â  Â  prezzo_originale: 14.99,
Â  Â  sconto: 37,
Â  Â  descrizione: "Calzini lunghi in cotone di alta qualitÃ , comodi e traspiranti. Prezzo piÃ¹ basso degli ultimi 30 giorni.",
Â  Â  categoria: "fashion"
Â  },
Â  {
Â  Â  id: "prod29",
Â  Â  link: "https://amzn.to/3Z7eYZz",
Â  Â  img: "https://m.media-amazon.com/images/I/51kcic+JN-L._AC_SL1095_.jpg",
Â  Â  nome: "CaffÃ¨ Borbone Respresso, Miscela Blu - 100 Capsule",
Â  Â  prezzo: 19.49,
Â  Â  prezzo_originale: 25.99,
Â  Â  sconto: 25,
Â  Â  descrizione: "CaffÃ¨ Borbone Respresso, Miscela Blu - 100 Capsule - Compatibili con le Macchine ad uso domestico Nespresso.",
Â  Â  categoria: "casa"
Â  },
Â  {
Â  Â  id: "prod30",
Â  Â  link: "https://amzn.to/43PvEHy",
Â  Â  img: "https://m.media-amazon.com/images/I/81irfL63EQL.__AC_SX300_SY300_QL70_ML2_.jpg",
Â  Â  nome: "Samsung Galaxy S22+ 5G â€“ 128GB (Ricondizionato)",
Â  Â  prezzo: 284.99,
Â  Â  prezzo_originale: 450.00,
Â  Â  sconto: 37,
Â  Â  descrizione: "Smartphone ricondizionato con SIM singola + e-SIM, colore Phantom Black. Risparmia 155,00â‚¬ rispetto al prezzo nuovo.",
Â  Â  categoria: "smartphone"
Â  },
Â  {
Â  Â  id: "prod31",
Â  Â  link: "https://amzn.to/3HsKGdy",
Â  Â  img: "https://m.media-amazon.com/images/I/61CY-+ZEN6L._AC_SY300_SX300_.jpg",
Â  Â  nome: "Samsung Galaxy S21 Ultra 5G â€“ 128GB (Ricondizionato)",
Â  Â  prezzo: 294.99,
Â  Â  prezzo_originale: 480.00,
Â  Â  sconto: 39,
Â  Â  descrizione: "Smartphone ricondizionato, RAM 12GB, Dual SIM (e-SIM), colore Nero. Ottima occasione con grande risparmio.",
Â  Â  categoria: "smartphone"
Â  },
Â  {
Â  Â  id: "prod32",
Â  Â  link: "https://amzn.to/3FcZUD1",
Â  Â  img: "https://m.media-amazon.com/images/I/61pc4vR8BoL._AC_SL1500_.jpg",
Â  Â  nome: "Samsung Galaxy A16 (128 GB)",
Â  Â  prezzo: 120.98,
Â  Â  prezzo_originale: 179.90,
Â  Â  sconto: 33,
Â  Â  descrizione: "Samsung Galaxy A16 Smartphone Android 14, Display Super AMOLED 6.7\" FHD+, 4GB RAM, 128GB, Batteria 5.000 mAh, Resistenza IP54.",
Â  Â  categoria: "smartphone"
Â  },
Â  {
Â  Â  id: "prod33",
Â  Â  link: "https://amzn.to/43ECrTf",
Â  Â  img: "https://m.media-amazon.com/images/I/616+oTRo6-L._AC_SL1500_.jpg",
Â  Â  nome: "Samsung Galaxy A56 5G (256 GB)",
Â  Â  prezzo: 342.68,
Â  Â  prezzo_originale: 499.90,
Â  Â  sconto: 31,
Â  Â  descrizione: "Samsung Galaxy A56 5G, smartphone Android, 256 GB di memoria, 8 GB di RAM, antracite, grande schermo, lunga durata della batteria.",
Â  Â  categoria: "smartphone"
Â  },
Â  {
Â  Â  id: "prod34",
Â  Â  link: "https://amzn.to/43gLxGT",
Â  Â  img: "https://m.media-amazon.com/images/I/61waTtq8hCL._AC_SL1500_.jpg",
Â  Â  nome: "GALAXY A26 5G â€“ 8GB + 256GB - Black",
Â  Â  prezzo: 234.69,
Â  Â  prezzo_originale: 319.90,
Â  Â  sconto: 27,
Â  Â  descrizione: "Smartphone GALAXY A26 5G con 8GB di RAM e 256GB di memoria interna. Ottimo rapporto qualitÃ -prezzo.",
Â  Â  categoria: "smartphone"
Â  },
Â  {
Â  Â  id: "prod35",
Â  Â  link: "https://amzn.to/43RhVzW",
Â  Â  img: "https://m.media-amazon.com/images/I/713AzRHXYeL._AC_SL1500_.jpg",
Â  Â  nome: "UpCircle Cotton fioc di bambÃ¹ â€“ 200 pezzi",
Â  Â  prezzo: 5.49,
Â  Â  prezzo_originale: 7.99,
Â  Â  sconto: 31,
Â  Â  descrizione: "UpCircle Cotton fioc di bambÃ¹, biodegradabili, sostenibili, senza plastica, completamente riciclabili â€“ un punto fermo per qualsiasi bagno.",
Â  Â  categoria: "salute"
Â  },
Â  {
Â  Â  id: "prod36",
Â  Â  link: "https://amzn.to/3FoIjIi",
Â  Â  img: "https://m.media-amazon.com/images/I/61MKKroaphL.__AC_SX300_SY300_QL70_ML2_.jpg",
Â  Â  nome: "Supradyn Energy Multivitaminico â€“ 70 Caramelle",
Â  Â  prezzo: 11.19,
Â  Â  prezzo_originale: 19.90,
Â  Â  sconto: 44,
Â  Â  descrizione: "Integratore multivitaminico con vitamine A, B, C, D, E e Coenzima Q10. 70 caramelle gommose al gusto ciliegia, lampone e arancia.",
Â  Â  categoria: "salute"
Â  },
Â  {
Â  Â  id: "prod37",
Â  Â  link: "https://amzn.to/4jnbTvu",
Â  Â  img: "https://m.media-amazon.com/images/I/51HcFzY9EmL._AC_SL1080_.jpg",
Â  Â  nome: "ZPAPER - 6 Rotoli Asciugatutto Professionali",
Â  Â  prezzo: 29.95,
Â  Â  prezzo_originale: 35.00,
Â  Â  sconto: 14,
Â  Â  descrizione: "Pura cellulosa, 2 veli, confezionati. Rotoloni asciugatutto multiuso per pulire i disastri in casa e in ambienti professionali.",
Â  Â  categoria: "casa"
Â  },
Â  {
Â  Â  id: "prod38",
Â  Â  link: "https://amzn.to/4jrHVq9",
Â  Â  img: "https://m.media-amazon.com/images/I/91krk-VZlwL._AC_SL1500_.jpg",
Â  Â  nome: "Amazon Basics - 20 Sacchetti sottovuoto con pompa",
Â  Â  prezzo: 27.19,
Â  Â  prezzo_originale: 32.99,
Â  Â  sconto: 18,
Â  Â  descrizione: "20 unitÃ  con pompa a mano, per risparmiare spazio con efficienza e semplicitÃ . Ideali per vestiti e piumoni.",
Â  Â  categoria: "casa"
Â  },
Â  {
Â  Â  id: "prod39",
Â  Â  link: "https://m.media-amazon.com/images/I/7107Ze-04CL._AC_SL1500_.jpg",
Â  Â  nome: "Amazon Basics - 8 Batterie Ricaricabili AA NiMH (2000 mAh)",
Â  Â  prezzo: 13.52,
Â  Â  prezzo_originale: 16.99,
Â  Â  sconto: 20,
Â  Â  descrizione: "Ricaricabili fino a 1000 volte, pre-caricate e pronte all'uso. Energia affidabile per i tuoi dispositivi.",
Â  Â  categoria: "tech"
Â  },
Â  {
Â  Â  id: "prod40",
Â  Â  link: "https://m.media-amazon.com/images/I/812hFM3JmTL._AC_SL1500_.jpg",
Â  Â  nome: "Fabuloso Ammorbidente Concentrato - 4x1,25L (224 lavaggi)",
Â  Â  prezzo: 18.72,
Â  Â  prezzo_originale: 24.99,
Â  Â  sconto: 25,
Â  Â  descrizione: "Profumo Fresco Mattino. Fragranza attivata dal movimento, facilita la stiratura e lascia i capi morbidi e profumati.",
Â  Â  categoria: "casa"
Â  },
Â  {
Â  Â  id: "prod41",
Â  Â  link: "https://amzn.to/4mChp0i",
Â  Â  img: "https://m.media-amazon.com/images/I/61QKPdoU5TL.__AC_SX300_SY300_QL70_ML2_.jpg",
Â  Â  nome: "ZPAPER - 60 Rotoli di Carta Igienica 2 Veli",
Â  Â  prezzo: 32.36,
Â  Â  prezzo_originale: 39.90,
Â  Â  sconto: 19,
Â  Â  descrizione: "60 rotoli, 250 fogli per rotolo, 2 veli, morbida e resistente. Ideale per casa o ufficio.",
Â  Â  categoria: "casa"
Â  },
Â  {
Â  Â  id: "prod42",
Â  Â  link: "https://amzn.to/3Hfvl04",
Â  Â  img: "https://m.media-amazon.com/images/I/617i66nvMxL._AC_SY741_.jpg",
Â  Â  nome: "Vitamina B12 Vegan 365 Compresse PiÃ¹Life",
Â  Â  prezzo: 14.30,
Â  Â  prezzo_originale: 19.99,
Â  Â  sconto: 28,
Â  Â  descrizione: "Vitamina B12 Cianocobalamina, per sistema immunitario e riduzione stanchezza fisica e mentale. 1000 mcg.",
Â  Â  categoria: "salute"
Â  },
Â  {
Â  Â  id: "prod43",
Â  Â  link: "https://amzn.to/4dM4hSk",
Â  Â  img: "https://m.media-amazon.com/images/I/71uuRXQz1JL._AC_SL1500_.jpg",
Â  Â  nome: "Magnesio Citrato Vegano Tamponato (240 Capsule)",
Â  Â  prezzo: 17.09,
Â  Â  prezzo_originale: 22.90,
Â  Â  sconto: 25,
Â  Â  descrizione: "Con 444mg polvere elementare, riduce stanchezza e affaticamento, senza additivi nÃ© glutine.",
Â  Â  categoria: "salute"
Â  },
Â  {
Â  Â  id: "prod44",
Â  Â  link: "https://amzn.to/4jq1SOj",
Â  Â  img: "https://m.media-amazon.com/images/I/71GXfnVPsPL.__AC_SX300_SY300_QL70_ML2_.jpg",
Â  Â  nome: "Zzzquil Natura Integratore Per Il Sonno (144 pastiglie)",
Â  Â  prezzo: 36.99,
Â  Â  prezzo_originale: 49.90,
Â  Â  sconto: 26,
Â  Â  descrizione: "Melatonina con estratti di lavanda, valeriana e camomilla. Maxi formato 2x72 pastiglie gommose per favorire il sonno.",
Â  Â  categoria: "salute"
Â  },
Â  {
Â  Â  id: "prod45",
Â  Â  link: "https://amzn.to/3Z3U39Q",
Â  Â  img: "https://m.media-amazon.com/images/I/71NY7I+OLQL._AC_SY300_SX300_.jpg",
Â  Â  nome: "Novanight Tripla Azione Melatonina per Dormire",
Â  Â  prezzo: 23.21,
Â  Â  prezzo_originale: 31.90,
Â  Â  sconto: 27,
Â  Â  descrizione: "Integratore per disturbi del sonno, senza glutine. Contiene melatonina, escolzia, passiflora e melissa. Non induce dipendenza.",
Â  Â  categoria: "salute"
Â  },
Â  {
Â  Â  id: "prod46",
Â  Â  link: "https://amzn.to/43PEXay",
Â  Â  img: "https://m.media-amazon.com/images/I/61NUQEFRTFL._AC_SX522_.jpg",
Â  Â  nome: "SWISSE Ultivit - Multivitaminico Ragazza (60 Compresse)",
Â  Â  prezzo: 13.46,
Â  Â  prezzo_originale: 21.90,
Â  Â  sconto: 39,
Â  Â  descrizione: "Multivitaminico con zinco e vitamine per riduzione stanchezza e supporto sistema immunitario. Integratore con ferro, made in Italy.",
Â  Â  categoria: "salute"
Â  },
Â  {
Â  Â  id: "prod47",
Â  Â  link: "https://amzn.to/4mAMTnv",
Â  Â  img: "https://m.media-amazon.com/images/I/51AyIO7mVXL._AC_SX569_.jpg",
Â  Â  nome: "N-K Anello Intelligente Cambia Colore con Temperatura",
Â  Â  prezzo: 1.82,
Â  Â  prezzo_originale: 9.99,
Â  Â  sconto: 82,
Â  Â  descrizione: "Anello per coppie e amanti, cambia colore in base alla temperatura e allâ€™umore. Unisex, in acciaio inox di alta qualitÃ  e design alla moda.",
Â  Â  categoria: "fashion"
Â  },
Â  {
Â  Â  id: "prod48",
Â  Â  link: "https://amzn.to/4jlkrDe",
Â  Â  img: "https://m.media-amazon.com/images/I/81Ev1JwtPhL._AC_SX569_.jpg",
Â  Â  nome: "Amazon Essentials T-Shirt Basic Uomo - Pacco da 6",
Â  Â  prezzo: 25.99,
Â  Â  prezzo_originale: 34.99,
Â  Â  sconto: 26,
Â  Â  descrizione: "Magliette girocollo in cotone, versatili e morbide, ideali per ogni occasione. QualitÃ  Amazon Essentials.",
Â  Â  categoria: "fashion"
Â  },
Â  {
Â  Â  id: "prod49",
Â  Â  link: "https://amzn.to/3SUAqNE",
Â  Â  img: "https://m.media-amazon.com/images/I/61KSB-CGSyL._AC_SX569_.jpg",
Â  Â  nome: "ALPIDEX T-Shirt Uomo - Confezione da 5",
Â  Â  prezzo: 39.99,
Â  Â  prezzo_originale: 49.99,
Â  Â  sconto: 20,
Â  Â  descrizione: "Magliette da uomo con girocollo disponibili in varie taglie dalla S alla 5XL. Perfette per tutti i giorni, comode e resistenti.",
Â  Â  categoria: "fashion"
Â  },
Â  {
Â  Â  id: "prod50",
Â  Â  link: "https://amzn.to/3Z60eKn",
Â  Â  img: "https://m.media-amazon.com/images/I/81Auh7uuz1L._AC_SX466_.jpg",
Â  Â  nome: "Amazon Essentials Felpa con Cappuccio Donna",
Â  Â  prezzo: 19.60,
Â  Â  prezzo_originale: 28.00,
Â  Â  sconto: 30,
Â  Â  descrizione: "Felpa da donna in pile, con cappuccio e cerniera. Calda, comoda e ideale per lâ€™uso quotidiano. Disponibile in vari colori.",
Â  Â  categoria: "fashion"
Â  },
Â  {
Â  Â  id: "prod51",
Â  Â  link: "https://amzn.to/43qkEio",
Â  Â  img: "https://m.media-amazon.com/images/I/61V8VUE1dFL.__AC_SX300_SY300_QL70_ML2_.jpg",
Â  Â  nome: "Amazfit Bip 5 Smartwatch con Schermo Grande",
Â  Â  prezzo: 57.99,
Â  Â  prezzo_originale: 89.90,
Â  Â  sconto: 35,
Â  Â  descrizione: "Smartwatch con chiamate Bluetooth, Alexa integrata, GPS, durata batteria 10 giorni, fitness tracker con battito cardiaco e monitoraggio ossigeno.",
Â  Â  categoria: "tech"
Â  },
Â  {
Â  Â  id: "prod52",
Â  Â  link: "https://amzn.to/4jlczlj",
Â  Â  img: "https://m.media-amazon.com/images/I/51Kmnt241oL.__AC_SX300_SY300_QL70_ML2_.jpg",
Â  Â  nome: "Imou 3MP Telecamera Wi-Fi Interno 360Â°",
Â  Â  prezzo: 22.99,
Â  Â  prezzo_originale: 39.99,
Â  Â  sconto: 43,
Â  Â  descrizione: "Videocamera di sorveglianza 2K con tracciamento del movimento, rilevamento umano, audio bidirezionale e connessione 2,4GHz.",
Â  Â  categoria: "tech"
Â  },
Â  {
Â  Â  id: "prod53",
Â  Â  link: "https://amzn.to/43GhYgW",
Â  Â  img: "https://m.media-amazon.com/images/I/81UE75N+r1L._AC_SL1500_.jpg",
Â  Â  nome: "SEHMUA 4G LTE Telecamera Esterno senza Fili con Pannello Solare",
Â  Â  prezzo: 51.43,
Â  Â  prezzo_originale: 69.99,
Â  Â  sconto: 27,
Â  Â  descrizione: "Telecamera con Sim, 2K 360 PTZ e batterie. Amazon Choice. Offerta a tempo! Prezzo piÃ¹ basso degli ultimi 30 giorni.",
Â  Â  categoria: "tech"
Â  },
Â  {
Â  Â  id: "prod54",
Â  Â  link: "https://amzn.to/4kg3QC7",
Â  Â  img: "https://m.media-amazon.com/images/I/71dy+yYz4iL._AC_SX522_.jpg",
Â  Â  nome: "Amazon Essentials Maglietta Intima Scollo A V (Pacco da 6)",
Â  Â  prezzo: 25.99,
Â  Â  prezzo_originale: 34.99,
Â  Â  sconto: 26,
Â  Â  descrizione: "Pacco da 6 magliette intime da uomo, traspiranti e in cotone, perfette per il comfort quotidiano.",
Â  Â  categoria: "fashion"
Â  },
Â  {
Â  Â  id: "prod55",
Â  Â  link: "https://amzn.to/4mB7UhK",
Â  Â  img: "https://m.media-amazon.com/images/I/71b8mpCMTOL.__AC_SX300_SY300_QL70_ML2_.jpg",
Â  Â  nome: "by Amazon Quinoa biologica, 500g",
Â  Â  prezzo: 5.49,
Â  Â  prezzo_originale: 6.99,
Â  Â  sconto: 21,
Â  Â  descrizione: "Quinoa biologica certificata, ideale per un'alimentazione sana e bilanciata.",
Â  Â  categoria: "casa"
Â  },
Â  {
Â  Â  id: "prod56",
Â  Â  link: "https://amzn.to/3HusXTd",
Â  Â  img: "https://m.media-amazon.com/images/I/71Cm4at5uAL._AC_SL1500_.jpg",
Â  Â  nome: "NEW'C 3 Pezzi, Vetro Temperato per iPhone 15/16",
Â  Â  prezzo: 7.89,
Â  Â  prezzo_originale: 12.99,
Â  Â  sconto: 39,
Â  Â  descrizione: "Pellicola protettiva anti graffio - ultra resistente - trasparente HD - strumento di installazione facile incluso.",
Â  Â  categoria: "smartphone"
Â  },
Â  {
Â  Â  id: "prod57",
Â  Â  link: "https://amzn.to/3FozrT6",
Â  Â  img: "https://m.media-amazon.com/images/I/71+5mYCqy7S._AC_SX342_SY445_.jpg",
Â  Â  nome: "Apple AirTag (1 pezzo)",
Â  Â  prezzo: 28.99,
Â  Â  prezzo_originale: 39.00,
Â  Â  sconto: 26,
Â  Â  descrizione: "Dispositivo di localizzazione Bluetooth per ritrovare oggetti come chiavi, zaini e altro tramite l'app Dov'Ã¨ su iPhone.",
Â  Â  categoria: "tech"
Â  },
Â  {
Â  Â  id: "prod58",
Â  Â  link: "https://amzn.to/3T8pQCT",
Â  Â  img: "https://m.media-amazon.com/images/I/71fRnkkqVdL.__AC_SX300_SY300_QL70_ML2_.jpg",
Â  Â  nome: "HP 305 Nero e Tricromia, 2 Cartucce Originali",
Â  Â  prezzo: 24.99,
Â  Â  prezzo_originale: 31.99,
Â  Â  sconto: 22,
Â  Â  descrizione: "Compatibili con stampanti HP DeskJet serie 2300, 2700, 2800, 4200, 4100, HP Envy 6010, 6020, 6030 e 6040.",
Â  Â  categoria: "tech"
Â  },
Â  {
Â  Â  id: "prod59",
Â  Â  link: "https://amzn.to/4dTbdNq",
Â  Â  img: "https://m.media-amazon.com/images/I/61DvMw16ITL.__AC_SY445_SX342_QL70_ML2_.jpg",
Â  Â  nome: "Apple AirPods 4 con custodia USB-C",
Â  Â  prezzo: 128.99,
Â  Â  prezzo_originale: 159.00,
Â  Â  sconto: 19,
Â  Â  descrizione: "Auricolari wireless Bluetooth con audio spaziale personalizzato, resistenza al sudore e allâ€™acqua, chip H2, fino a 24 ore di autonomia.",
Â  Â  categoria: "tech"
Â  },
Â  {
Â  Â  id: "prod60",
Â  Â  link: "https://amzn.to/3SEY4xJ",
Â  Â  img: "https://m.media-amazon.com/images/I/61fSyWVkrYL.__AC_SY300_SX300_QL70_ML2_.jpg",
Â  Â  nome: "Tapo C200 Telecamera Wi-Fi Interno FHD 360Â°",
Â  Â  prezzo: 21.99,
Â  Â  prezzo_originale: 29.99,
Â  Â  sconto: 27,
Â  Â  descrizione: "Scelta Amazon. Visione Notturna, Audio Bidirezionale, Rilevamento di movimento e notifiche, Allarme acustico e luminoso integrato.",
Â  Â  categoria: "tech"
Â  },
Â  {
Â  Â  id: "prod61",
Â  Â  link: "https://amzn.to/4kCXBZd",
Â  Â  img: "https://m.media-amazon.com/images/I/61c9X3+N4AL._AC_SX300_SY300_.jpg",
Â  Â  nome: "Caricatore USB C Rapido 40W 4 Porte",
Â  Â  prezzo: 14.99,
Â  Â  prezzo_originale: 20.99,
Â  Â  sconto: 29,
Â  Â  descrizione: "Presa USB Multipla PD & QC3.0 per Samsung S22/S23/S24, iPhone 15/16/14. Disponibile anche con coupon.",
Â  Â  categoria: "tech"
Â  },
Â  {
Â  Â  id: "prod62",
Â  Â  link: "https://amzn.to/3FUVgJY",
Â  Â  img: "https://m.media-amazon.com/images/I/91MSouIX7HL._AC_SX466_.jpg",
Â  Â  nome: "Amazon Essentials Felpa Uomo con Cappuccio e Zip",
Â  Â  prezzo: 21.60,
Â  Â  prezzo_originale: 30.00,
Â  Â  sconto: 28,
Â  Â  descrizione: "Felpa in pile con cappuccio, comoda e calda, adatta a tutte le taglie, anche Big & Tall. Design classico con zip frontale.",
Â  Â  categoria: "fashion"
Â  },
Â  {
Â  Â  id: "prod63",
Â  Â  link: "https://amzn.to/4mZh5sw",
Â  Â  img: "https://m.media-amazon.com/images/I/61aAOFdLzJL.__AC_SX395_SY395_QL70_ML2_.jpg",
Â  Â  nome: "ASICS Gel-Excite 9 Scarpe da Corsa, Uomo",
Â  Â  prezzo: 127.66,
Â  Â  prezzo_originale: 160.00,
Â  Â  sconto: 20,
Â  Â  descrizione: "Scarpe da corsa leggere e ammortizzate, ideali per allenamenti e uso quotidiano. Disponibili in varie taglie EU.",
Â  Â  categoria: "fashion"
Â  },
Â  {
Â  Â  id: "prod64",
Â  Â  link: "https://amzn.to/3SRisMa",
Â  Â  img: "https://m.media-amazon.com/images/I/91MEK1bV2lL.__AC_SY445_SX342_QL70_ML2_.jpg",
Â  Â  nome: "Joma Men's Supernova III T-Shirt",
Â  Â  prezzo: 21.99,
Â  Â  prezzo_originale: 29.99,
Â  Â  sconto: 27,
Â  Â  descrizione: "Maglietta sportiva da uomo, leggera e traspirante. Disponibile in varie taglie dalla 6XS alla XL.",
Â  Â  categoria: "fashion"
Â  },
Â  {
Â  Â  id: "prod65",
Â  Â  link: "https://www.amazon.com/dp/B0CBRR1GZK",
Â  Â  img: "https://m.media-amazon.com/images/I/71EnaI2yCdL.__AC_SX342_SY445_QL70_ML2_.jpg",
Â  Â  nome: "Build Your Brand T-Shirt Uomo Basic",
Â  Â  prezzo: 6.50,
Â  Â  prezzo_originale: 12.00,
Â  Â  sconto: 46,
Â  Â  descrizione: "Una maglietta basic che ogni uomo deve avere. Taglio regolare e scollo rotondo a coste.",
Â  Â  categoria: "fashion"
Â  },
Â  {
Â  Â  id: "prod66",
Â  Â  link: "https://www.amazon.com/dp/B096YNRT7Z",
Â  Â  img: "https://m.media-amazon.com/images/I/71rDrJKm85L.__AC_SY445_SX342_QL70_ML2_.jpg",
Â  Â  nome: "Amazon Essentials Pantaloni Uomo Slim Fit",
Â  Â  prezzo: 21.93,
Â  Â  prezzo_originale: 29.90,
Â  Â  sconto: 27,
Â  Â  descrizione: "Ascoltiamo i feedback dei clienti e perfezioniamo ogni dettaglio per offrire abbigliamento comodo e di alta qualitÃ .",
Â  Â  categoria: "fashion"
Â  },
Â  {
Â  Â  id: "prod67",
Â  Â  link: "https://www.amazon.com/dp/B06XWND2ST",
Â  Â  img: "https://m.media-amazon.com/images/I/816fhPoCRyS.__AC_SY445_SX342_QL70_ML2_.jpg",
Â  Â  nome: "Amazon Essentials Camicia Casual in Popeline Uomo",
Â  Â  prezzo: 24.00,
Â  Â  prezzo_originale: 32.00,
Â  Â  sconto: 25,
Â  Â  descrizione: "Un marchio Amazon. VestibilitÃ  regular e maniche lunghe per un look classico e versatile.",
Â  Â  categoria: "fashion"
Â  },
Â  {
Â  Â  id: "prod68",
Â  Â  link: "https://www.amazon.com/dp/B0B129TD65",
Â  Â  img: "https://m.media-amazon.com/images/I/51UaQx1b+1L._AC_SX342_SY445_.jpg",
Â  Â  nome: "LINVO Occhiali da Sole Polarizzati Rettangolari",
Â  Â  prezzo: 12.00,
Â  Â  prezzo_originale: 19.99,
Â  Â  sconto: 40,
Â  Â  descrizione: "Occhiali da sole classici per uomo e donna, con protezione 100% UV400. Ideali per guida e pesca.",
Â  Â  categoria: "fashion"
Â  },
Â  {
Â  Â  id: "prod69",
Â  Â  link: "https://www.amazon.com/dp/B07G4SRQC8",
Â  Â  img: "https://m.media-amazon.com/images/I/81m7hD4I3aL.__AC_SX300_SY300_QL70_ML2_.jpg",
Â  Â  nome: "Amazon Basics - Trolley Rigido da Cabina (55 cm)",
Â  Â  prezzo: 34.00,
Â  Â  prezzo_originale: 55.00,
Â  Â  sconto: 38,
Â  Â  descrizione: "Bagaglio a mano con rotelle girevoli, approvato per Ryanair, Easyjet e altre compagnie aeree.",
Â  Â  categoria: "casa"
Â  },
Â  {
Â  Â  id: "prod70",
Â  Â  link: "https://www.amazon.com/dp/B09L8CZKRH",
Â  Â  img: "https://m.media-amazon.com/images/I/71LYN2Q16iL.__AC_SY395_SX395_QL70_ML2_.jpg",
Â  Â  nome: "Amazon Essentials Sandalo Infradito Donna",
Â  Â  prezzo: 19.00,
Â  Â  prezzo_originale: 25.00,
Â  Â  sconto: 24,
Â  Â  descrizione: "Sandalo casual con cinturino alla caviglia, comodo ed elegante per l'estate.",
Â  Â  categoria: "fashion"
Â  },
Â  {
Â  Â  id: "prod71",
Â  Â  link: "https://www.amazon.com/dp/B0C6DZKJ1X",
Â  Â  img: "https://m.media-amazon.com/images/I/61Y5pM28BuL.__AC_SY445_SX342_QL70_ML2_.jpg",
Â  Â  nome: "Amazon Essentials T-Shirt Serafino Uomo (Pacco da 2)",
Â  Â  prezzo: 26.00,
Â  Â  prezzo_originale: 35.00,
Â  Â  sconto: 26,
Â  Â  descrizione: "T-shirt a maniche corte in cotone, vestibilitÃ  slim. Un capo essenziale per il guardaroba maschile.",
Â  Â  categoria: "fashion"
Â  },
Â  {
Â  Â  id: "prod72",
Â  Â  link: "https://www.amazon.com/dp/B08JHP1L86",
Â  Â  img: "https://m.media-amazon.com/images/I/81qIK780N4L.__AC_SY445_SX342_QL70_ML2_.jpg",
Â  Â  nome: "Amazon Essentials Jeans Uomo Elasticizzati",
Â  Â  prezzo: 27.90,
Â  Â  prezzo_originale: 40.00,
Â  Â  sconto: 30,
Â  Â  descrizione: "Un marchio Amazon - Questi classici jeans a 5 tasche dalla vestibilitÃ  sportiva sono leggermente elasticizzati.",
Â  Â  categoria: "fashion"
Â  },
Â  {
Â  Â  id: "prod73",
Â  Â  link: "https://www.amazon.com/dp/B07Z6JM8TQ",
Â  Â  img: "https://m.media-amazon.com/images/I/71tUoMNs8fL.__AC_SY445_SX342_QL70_ML2_.jpg",
Â  Â  nome: "Amazon Essentials Slip Donna in Cotone (Pacco Multiplo)",
Â  Â  prezzo: 12.05,
Â  Â  prezzo_originale: 18.00,
Â  Â  sconto: 33,
Â  Â  descrizione: "Intimo da donna traspirante e comodo, disponibile anche in taglie forti. QualitÃ  e comfort per tutti i giorni.",
Â  Â  categoria: "fashion"
Â  },
Â  {
Â  Â  id: "prod74",
Â  Â  link: "https://www.amazon.com/dp/B0CD2SHVLZ",
Â  Â  img: "https://m.media-amazon.com/images/I/81cKZpZzm5L.__AC_SY445_SX342_QL70_ML2_.jpg",
Â  Â  nome: "Amazon Basics - Zaino da Viaggio / Bagaglio a Mano",
Â  Â  prezzo: 34.00,
Â  Â  prezzo_originale: 45.00,
Â  Â  sconto: 24,
Â  Â  descrizione: "Zaino da viaggio versatile e spazioso, perfetto come bagaglio a mano per i tuoi viaggi.",
Â  Â  categoria: "casa"
Â  },
Â  {
Â  Â  id: "prod75",
Â  Â  link: "https://www.amazon.com/dp/B088DG714B",
Â  Â  img: "https://m.media-amazon.com/images/I/71vbSv0DSIL.__AC_SY445_SX342_QL70_ML2_.jpg",
Â  Â  nome: "Calzini Corti Tobilleros Uomo (9 Paia)",
Â  Â  prezzo: 16.00,
Â  Â  prezzo_originale: 22.99,
Â  Â  sconto: 30,
Â  Â  descrizione: "Confezione convenienza da 9 paia di calzini corti, comodi e traspiranti per l'uso quotidiano.",
Â  Â  categoria: "fashion"
Â  },
Â  {
Â  Â  id: "prod76",
Â  Â  link: "https://www.amazon.com/dp/B0CB21FKJ3",
Â  Â  img: "https://m.media-amazon.com/images/I/71E-K37BdsL.__AC_SY395_SX395_QL70_ML2_.jpg",
Â  Â  nome: "Skechers Uno Stand On Air, Scarpe da Ginnastica Uomo",
Â  Â  prezzo: 19.00,
Â  Â  prezzo_originale: 65.00,
Â  Â  sconto: 71,
Â  Â  descrizione: "Sneaker Durabuck con lacci e soletta in memory foam raffreddata ad aria per un comfort imbattibile.",
Â  Â  categoria: "fashion"
Â  },
Â  {
Â  Â  id: "prod77",
Â  Â  link: "https://www.amazon.com/dp/B0BG8JH3H9",
Â  Â  img: "https://m.media-amazon.com/images/I/81+fhlfEC0L._AC_SX342_SY445_.jpg",
Â  Â  nome: "Amazon Essentials Boxer in Jersey di Cotone (Pacco da 5)",
Â  Â  prezzo: 26.80,
Â  Â  prezzo_originale: 35.00,
Â  Â  sconto: 23,
Â  Â  descrizione: "Boxer da uomo comodi e di alta qualitÃ , disponibili anche in taglie forti. Un must-have per tutti i giorni.",
Â  Â  categoria: "fashion"
Â  },
Â  {
Â  Â  id: "prod78",
Â  Â  link: "https://www.amazon.com/dp/B07XB1Y3W2",
Â  Â  img: "https://m.media-amazon.com/images/I/81tCQ7KumJL.__AC_SY445_SX342_QL70_ML2_.jpg",
Â  Â  nome: "Amazon Essentials Jeans Uomo Taglio Dritto Bootcut",
Â  Â  prezzo: 35.00,
Â  Â  prezzo_originale: 45.00,
Â  Â  sconto: 22,
Â  Â  descrizione: "Un marchio Amazon - Il denim classico e lo stile a cinque tasche mettono in risalto questi jeans perfetti per tutti i giorni.",
Â  Â  categoria: "fashion"
Â  },
Â  {
Â  Â  id: "prod79",
Â  Â  link: "https://www.amazon.com/dp/B08WK5MQ1H",
Â  Â  img: "https://m.media-amazon.com/images/I/91FFTV5JTAL.__AC_SY445_SX342_QL70_ML2_.jpg",
Â  Â  nome: "Amazon Essentials Felpa Foderata in Pile Bambina",
Â  Â  prezzo: 16.00,
Â  Â  prezzo_originale: 22.00,
Â  Â  sconto: 27,
Â  Â  descrizione: "Felpa con cappuccio e zip per bambine e ragazze, calda e morbida per tenerle al caldo quando le temperature scendono.",
Â  Â  categoria: "fashion"
Â  },
Â  {
Â  Â  id: "prod80",
Â  Â  link: "https://www.amazon.com/dp/B0BLSY2RFH",
Â  Â  img: "https://m.media-amazon.com/images/I/61Cwt7x2zZL.__AC_SX395_SY395_QL70_ML2_.jpg",
Â  Â  nome: "Sneakers da Uomo con Suola Morbida",
Â  Â  prezzo: 42.00,
Â  Â  prezzo_originale: 55.00,
Â  Â  sconto: 24,
Â  Â  descrizione: "Sneakers eleganti con tacco a zeppa, suola morbida e traspirante. Perfette per un look casual e confortevole.",
Â  Â  categoria: "fashion"
Â  },
Â  {
Â  Â  id: "prod81",
Â  Â  link: "https://www.amazon.com/dp/B08X19T334",
Â  Â  img: "https://m.media-amazon.com/images/I/81nOh4knyPL.__AC_SY445_SX342_QL70_ML2_.jpg",
Â  Â  nome: "Amazon Essentials Jeans Elasticizzati Uomo, Taglio Dritto",
Â  Â  prezzo: 27.10,
Â  Â  prezzo_originale: 38.00,
Â  Â  sconto: 29,
Â  Â  descrizione: "Jeans a vita alta con taglio dritto, realizzati con tessuto elasticizzato per il massimo comfort e una vestibilitÃ  perfetta.",
Â  Â  categoria: "fashion"
Â  },
Â  {
Â  Â  id: "prod82",
Â  Â  link: "https://www.amazon.com/dp/B0CWDXTKT3",
Â  Â  img: "https://m.media-amazon.com/images/I/81IpfF7o41L.__AC_SY445_SX342_QL70_ML2_.jpg",
Â  Â  nome: "SOXCO Calze da Lavoro Rinforzate Uomo (10 Paia)",
Â  Â  prezzo: 19.99,
Â  Â  prezzo_originale: 28.99,
Â  Â  sconto: 31,
Â  Â  descrizione: "La soluzione definitiva per chiunque abbia bisogno di calze da lavoro durevoli e confortevoli. Tallone e punta rinforzati.",
Â  Â  categoria: "fashion"
Â  },
Â  {
Â  Â  id: "prod83",
Â  Â  link: "https://www.amazon.com/dp/B097RV1D6R",
Â  Â  img: "https://m.media-amazon.com/images/I/81mZMvuvfYS.__AC_SY445_SX342_QL70_ML2_.jpg",
Â  Â  nome: "Amazon Essentials T-Shirt Donna Manica Corta (Taglie Forti)",
Â  Â  prezzo: 13.00, // Prezzo originale sembrava un errore, l'ho corretto
Â  Â  prezzo_originale: 18.00,
Â  Â  sconto: 28,
Â  Â  descrizione: "Un marchio Amazon - Questa comoda t-shirt combina uno scollo rotondo con una linea fluida. Disponibile in taglie forti.",
Â  Â  categoria: "fashion"
Â  },
Â  {
Â  Â  id: "prod84",
Â  Â  link: "https://www.amazon.com/dp/B0B9MX76FB",
Â  Â  img: "https://m.media-amazon.com/images/I/9101cym+dhL._AC_SY300_SX300_.jpg",
Â  Â  nome: "Popglory Smartwatch Uomo Donna con 2 Cinturini",
Â  Â  prezzo: 39.00,
Â  Â  prezzo_originale: 59.99,
Â  Â  sconto: 35,
Â  Â  descrizione: "Orologio digitale con chiamate e WhatsApp, contapassi, assistente vocale, cardiofrequenzimetro 24H, SpO2 e monitoraggio del sonno.",
Â  Â  categoria: "tech"
Â  },
Â  {
Â  Â  id: "prod85",
Â  Â  link: "https://www.amazon.com/dp/B08X2H31K5",
Â  Â  img: "https://m.media-amazon.com/images/I/81CWjDoZb6L.__AC_SY445_SX342_QL70_ML2_.jpg",
Â  Â  nome: "Amazon Essentials Pantaloni Jogger in Pile Uomo",
Â  Â  prezzo: 17.00,
Â  Â  prezzo_originale: 25.00,
Â  Â  sconto: 32,
Â  Â  descrizione: "Pantaloni da jogging con vestibilitÃ  rilassata, perfetti per il tempo libero e lo sport. Comodi e di alta qualitÃ .",
Â  Â  categoria: "fashion"
Â  },
Â  {
Â  Â  id: "prod86",
Â  Â  link: "https://www.amazon.com/dp/B06Y57GNY1",
Â  Â  img: "https://m.media-amazon.com/images/I/91lDjTg1IyL.__AC_SX300_SY300_QL70_ML2_.jpg",
Â  Â  nome: "Amazon Basics - Zaino da Escursionismo con Telaio Interno",
Â  Â  prezzo: 60.48,
Â  Â  prezzo_originale: 80.00,
Â  Â  sconto: 24,
Â  Â  descrizione: "Zaino tecnico con telaio interno e cerniera antipioggia, ideale per escursioni di piÃ¹ giorni e avventure all'aperto.",
Â  Â  categoria: "casa"
Â  },
Â  {
Â  Â  id: "prod87",
Â  Â  link: "https://www.amazon.it/dp/B0DQ8H5BPK",
Â  Â  img: "https://m.media-amazon.com/images/I/51riIg7rjlL._AC_SX679_.jpg",
Â  Â  nome: "ECOVACS X8 PRO OMNI Robot Aspirapolvere e Lavapavimenti",
Â  Â  prezzo: 849.00,
Â  Â  prezzo_originale: 1059.00,
Â  Â  sconto: 20,
Â  Â  descrizione: "Robot aspirapolvere intelligente con funzione di autopulizia, autosvuotamento e autolavaggio, ideale per una pulizia completa e automatica.",
Â  Â  categoria: "casa"
Â  }
];

Â  Â  /* --- THEMES (HEX) --- */
Â  Â  const presets = {
Â  Â  Â  Â  'light': { name: 'Chiaro', bg: '#F2F2F7', card: '#FFFFFF', text: '#000000', primary: '#007AFF', accent: '#5856D6' },
Â  Â  Â  Â  'dark': { name: 'Scuro', bg: '#000000', card: '#1C1C1E', text: '#FFFFFF', primary: '#0A84FF', accent: '#BF5AF2' },
Â  Â  Â  Â  'sunset': { name: 'Tramonto', bg: '#FFF7ED', card: '#FFFFFF', text: '#431407', primary: '#EA580C', accent: '#F97316' },
Â  Â  Â  Â  'forest': { name: 'Foresta', bg: '#022C22', card: '#064E3B', text: '#ECFDF5', primary: '#10B981', accent: '#34D399' },
Â  Â  Â  Â  'ocean': { name: 'Oceano', bg: '#0F172A', card: '#1E293B', text: '#F0F9FF', primary: '#38BDF8', accent: '#7DD3FC' },
Â  Â  Â  Â  'cyber': { name: 'Cyberpunk', bg: '#09090B', card: '#18181B', text: '#E4E4E7', primary: '#F472B6', accent: '#22D3EE' },
Â  Â  Â  Â  'luxury': { name: 'Lusso', bg: '#000000', card: '#111111', text: '#FAFAF9', primary: '#D4AF37', accent: '#EAB308' },
Â  Â  Â  Â  'rose': { name: 'Rosa', bg: '#FFF1F2', card: '#FFFFFF', text: '#881337', primary: '#FB7185', accent: '#F43F5E' },
Â  Â  Â  Â  'mint': { name: 'Menta', bg: '#F0FDF4', card: '#FFFFFF', text: '#14532D', primary: '#22C55E', accent: '#86EFAC' },
Â  Â  Â  Â  'desert': { name: 'Dune', bg: '#78350F', card: '#92400E', text: '#FEF3C7', primary: '#FCD34D', accent: '#F59E0B' },
Â  Â  Â  Â  'slate': { name: 'Ardesia', bg: '#F8FAFC', card: '#FFFFFF', text: '#0F172A', primary: '#64748B', accent: '#94A3B8' },
Â  Â  Â  Â  'nebula': { name: 'Nebulosa', bg: '#2E1065', card: '#4C1D95', text: '#F5F3FF', primary: '#A78BFA', accent: '#C084FC' }
Â  Â  };

Â  Â  /* --- APP LOGIC --- */
Â  Â  class App {
Â  Â  Â  Â  constructor() {
Â  Â  Â  Â  Â  Â  this.state = {
Â  Â  Â  Â  Â  Â  Â  Â  theme: 'light',
Â  Â  Â  Â  Â  Â  Â  Â  glass: false,
Â  Â  Â  Â  Â  Â  Â  Â  bold: false,
Â  Â  Â  Â  Â  Â  Â  Â  size: 17,
Â  Â  Â  Â  Â  Â  Â  Â  cart: [],
Â  Â  Â  Â  Â  Â  Â  Â  wishlist: [],
Â  Â  Â  Â  Â  Â  Â  Â  view: 'home',
Â  Â  Â  Â  Â  Â  Â  Â  promptType: null,
Â  Â  Â  Â  Â  Â  Â  Â  users: [], // Array di utenti salvati
Â  Â  Â  Â  Â  Â  Â  Â  currentUser: null // Utente loggato corrente
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  this.init();
Â  Â  Â  Â  }

Â  Â  Â  Â  init() {
Â  Â  Â  Â  Â  Â  if(localStorage.getItem('crono_state')) {
Â  Â  Â  Â  Â  Â  Â  Â  const saved = JSON.parse(localStorage.getItem('crono_state'));
Â  Â  Â  Â  Â  Â  Â  Â  // Merge saved state but ensure arrays exist
Â  Â  Â  Â  Â  Â  Â  Â  this.state = { ...this.state, ...saved };
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  this.applyTheme(this.state.theme);
Â  Â  Â  Â  Â  Â  this.applyDisplaySettings();
Â  Â  Â  Â  Â  Â  this.renderProducts();
Â  Â  Â  Â  Â  Â  this.renderThemes();
Â  Â  Â  Â  Â  Â  this.updateBadges();
Â  Â  Â  Â  Â  Â  this.initDraggableChat();
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Check if logged in for settings view
Â  Â  Â  Â  Â  Â  if(this.state.view === 'settings' && !this.state.currentUser) {
Â  Â  Â  Â  Â  Â  Â  Â  this.state.view = 'home'; // Fallback to home if not logged in
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  this.navigate(this.state.view); // Render current view

Â  Â  Â  Â  Â  Â  document.getElementById('globalSearchInput').addEventListener('input', (e) => {
Â  Â  Â  Â  Â  Â  Â  Â  const val = e.target.value.toLowerCase();
Â  Â  Â  Â  Â  Â  Â  Â  const filtered = products.filter(p => p.nome.toLowerCase().includes(val));
Â  Â  Â  Â  Â  Â  Â  Â  const target = this.state.view === 'home' ? 'homeGrid' : 'productsGrid';
Â  Â  Â  Â  Â  Â  Â  Â  this.renderGrid(filtered, target);
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }

Â  Â  Â  Â  saveState() {
Â  Â  Â  Â  Â  Â  localStorage.setItem('crono_state', JSON.stringify(this.state));
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- AUTH ENGINE --- */
Â  Â  Â  Â  openAuth() {
Â  Â  Â  Â  Â  Â  // Reset UI
Â  Â  Â  Â  Â  Â  this.resetAuthUI();
Â  Â  Â  Â  Â  Â  document.getElementById('authDialog').classList.add('open');
Â  Â  Â  Â  }

Â  Â  Â  Â  resetAuthUI() {
Â  Â  Â  Â  Â  Â  document.getElementById('authStep1').style.display = 'block';
Â  Â  Â  Â  Â  Â  document.getElementById('authStep2').style.display = 'none';
Â  Â  Â  Â  Â  Â  document.getElementById('authPasswordSection').classList.remove('open');
Â  Â  Â  Â  Â  Â  document.getElementById('authInputIdentity').value = '';
Â  Â  Â  Â  Â  Â  document.getElementById('authInputPassword').value = '';
Â  Â  Â  Â  Â  Â  document.getElementById('authTitle').innerText = 'Accedi';
Â  Â  Â  Â  Â  Â  document.getElementById('authSubtitle').innerText = 'Usa il tuo account Crono ID per accedere.';
Â  Â  Â  Â  Â  Â  this.pendingUser = null; // Reset pending user
Â  Â  Â  Â  }

Â  Â  Â  Â  handleAuthStep() {
Â  Â  Â  Â  Â  Â  const identity = document.getElementById('authInputIdentity').value.trim();
Â  Â  Â  Â  Â  Â  const passField = document.getElementById('authPasswordSection');
Â  Â  Â  Â  Â  Â  const passInput = document.getElementById('authInputPassword');

Â  Â  Â  Â  Â  Â  if(!identity) return this.showNotification('Inserisci email o nome utente', 'error');

Â  Â  Â  Â  Â  Â  // Caso 1: Stiamo giÃ  chiedendo la password (il box Ã¨ aperto)
Â  Â  Â  Â  Â  Â  if(passField.classList.contains('open')) {
Â  Â  Â  Â  Â  Â  Â  Â  const password = passInput.value.trim();
Â  Â  Â  Â  Â  Â  Â  Â  if(!password) return this.showNotification('Inserisci la password', 'error');
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  // Verifica Login
Â  Â  Â  Â  Â  Â  Â  Â  const user = this.state.users.find(u => (u.username === identity || u.email === identity) && u.password === password);
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  if(user) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.login(user);
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.showNotification('Password non corretta', 'error');
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  // Caso 2: Primo step (verifica identitÃ )
Â  Â  Â  Â  Â  Â  const userExists = this.state.users.find(u => u.username === identity || u.email === identity);

Â  Â  Â  Â  Â  Â  if(userExists) {
Â  Â  Â  Â  Â  Â  Â  Â  // Utente trovato -> Animazione Password verso il basso
Â  Â  Â  Â  Â  Â  Â  Â  passField.classList.add('open');
Â  Â  Â  Â  Â  Â  Â  Â  this.pendingUser = userExists; // Memorizza chi stiamo provando a loggare
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  // Utente NON trovato -> Overlay Registrazione
Â  Â  Â  Â  Â  Â  Â  Â  this.showRegistrationOverlay(identity);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  showRegistrationOverlay(prefill) {
Â  Â  Â  Â  Â  Â  document.getElementById('authStep1').style.display = 'none';
Â  Â  Â  Â  Â  Â  document.getElementById('authStep2').style.display = 'block';
Â  Â  Â  Â  Â  Â  document.getElementById('authTitle').innerText = 'Crea ID';
Â  Â  Â  Â  Â  Â  document.getElementById('authSubtitle').innerText = '';
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Prefill intelligente
Â  Â  Â  Â  Â  Â  if(prefill.includes('@')) document.getElementById('regEmail').value = prefill;
Â  Â  Â  Â  Â  Â  else document.getElementById('regUser').value = prefill;
Â  Â  Â  Â  }

Â  Â  Â  Â  finalizeRegistration() {
Â  Â  Â  Â  Â  Â  const username = document.getElementById('regUser').value.trim();
Â  Â  Â  Â  Â  Â  const email = document.getElementById('regEmail').value.trim();
Â  Â  Â  Â  Â  Â  const phone = document.getElementById('regPhone').value.trim();
Â  Â  Â  Â  Â  Â  const pass = document.getElementById('regPass').value.trim();
Â  Â  Â  Â  Â  Â  const confirm = document.getElementById('regConfirm').value.trim();

Â  Â  Â  Â  Â  Â  if(!username || !email || !pass) return this.showNotification('Compila i campi obbligatori', 'error');
Â  Â  Â  Â  Â  Â  if(pass !== confirm) return this.showNotification('Le password non coincidono', 'error');

Â  Â  Â  Â  Â  Â  const newUser = { username, email, phone, password: pass, avatar: username.charAt(0).toUpperCase() };
Â  Â  Â  Â  Â  Â  this.state.users.push(newUser);
Â  Â  Â  Â  Â  Â  this.saveState();
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  this.showNotification('Account creato!', 'success');
Â  Â  Â  Â  Â  Â  this.login(newUser);
Â  Â  Â  Â  }

Â  Â  Â  Â  login(user) {
Â  Â  Â  Â  Â  Â  this.state.currentUser = user;
Â  Â  Â  Â  Â  Â  this.saveState();
Â  Â  Â  Â  Â  Â  document.getElementById('authDialog').classList.remove('open');
Â  Â  Â  Â  Â  Â  this.showNotification(`Benvenuto, ${user.username}!`, 'success');
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Aggiorna UI profilo
Â  Â  Â  Â  Â  Â  this.updateProfileUI();
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Naviga alle impostazioni
Â  Â  Â  Â  Â  Â  this.navigate('settings');
Â  Â  Â  Â  }

Â  Â  Â  Â  logout() {
Â  Â  Â  Â  Â  Â  this.state.currentUser = null;
Â  Â  Â  Â  Â  Â  this.saveState();
Â  Â  Â  Â  Â  Â  this.navigate('home');
Â  Â  Â  Â  Â  Â  this.showNotification('Disconnesso', 'info');
Â  Â  Â  Â  }

Â  Â  Â  Â  updateProfileUI() {
Â  Â  Â  Â  Â  Â  if(!this.state.currentUser) return;
Â  Â  Â  Â  Â  Â  const u = this.state.currentUser;
Â  Â  Â  Â  Â  Â  document.getElementById('userProfileCard').innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  <div class="user-avatar">${u.avatar}</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="font-weight:700; font-size:1.1em;">${u.username}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="color:var(--text-sec); font-size:0.9em;">${u.email}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="color:var(--text-sec); font-size:0.8em; margin-top:2px;">Crono ID</div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- THEME ENGINE (HEX TO RGB) --- */
Â  Â  Â  Â  hexToRgb(hex) {
Â  Â  Â  Â  Â  Â  const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
Â  Â  Â  Â  Â  Â  return result ? `${parseInt(result[1], 16)}, ${parseInt(result[2], 16)}, ${parseInt(result[3], 16)}` : '0,0,0';
Â  Â  Â  Â  }

Â  Â  Â  Â  applyTheme(keyOrObj) {
Â  Â  Â  Â  Â  Â  let t = typeof keyOrObj === 'string' ? presets[keyOrObj] : keyOrObj;
Â  Â  Â  Â  Â  Â  if(!t) t = presets['light'];

Â  Â  Â  Â  Â  Â  const root = document.documentElement.style;
Â  Â  Â  Â  Â  Â  root.setProperty('--bg-rgb', this.hexToRgb(t.bg));
Â  Â  Â  Â  Â  Â  root.setProperty('--card-rgb', this.hexToRgb(t.card));
Â  Â  Â  Â  Â  Â  root.setProperty('--text-rgb', this.hexToRgb(t.text));
Â  Â  Â  Â  Â  Â  root.setProperty('--primary-rgb', this.hexToRgb(t.primary));
Â  Â  Â  Â  Â  Â  root.setProperty('--accent-rgb', this.hexToRgb(t.accent || t.primary));

Â  Â  Â  Â  Â  Â  if (typeof keyOrObj === 'string') this.state.theme = keyOrObj;
Â  Â  Â  Â  Â  Â  this.saveState();
Â  Â  Â  Â  Â  Â  this.renderThemes();
Â  Â  Â  Â  }

Â  Â  Â  Â  renderThemes() {
Â  Â  Â  Â  Â  Â  const container = document.getElementById('themeSelector');
Â  Â  Â  Â  Â  Â  container.innerHTML = Object.entries(presets).map(([k, t]) => `
Â  Â  Â  Â  Â  Â  Â  Â  <div class="theme-item ${this.state.theme === k ? 'active' : ''}" onclick="app.applyTheme('${k}')">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="theme-preview" style="background:${t.bg}; display:flex; justify-content:center; align-items:center;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="width:20px; height:20px; background:${t.primary}; border-radius:50%;"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="theme-name">${t.name}</div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  `).join('');
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- DISPLAY SETTINGS --- */
Â  Â  Â  Â  applyDisplaySettings() {
Â  Â  Â  Â  Â  Â  const r = document.documentElement.style;
Â  Â  Â  Â  Â  Â  r.setProperty('--base-size', this.state.size + 'px');
Â  Â  Â  Â  Â  Â  r.setProperty('--font-weight-normal', this.state.bold ? '600' : '400');
Â  Â  Â  Â  Â  Â  r.setProperty('--font-weight-bold', this.state.bold ? '800' : '600');
Â  Â  Â  Â  Â  Â  document.body.classList.toggle('glass-active', this.state.glass);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  document.getElementById('glassToggle').checked = this.state.glass;
Â  Â  Â  Â  Â  Â  document.getElementById('boldToggle').checked = this.state.bold;
Â  Â  Â  Â  }

Â  Â  Â  Â  toggleGlass() { this.state.glass = !this.state.glass; this.applyDisplaySettings(); this.saveState(); }
Â  Â  Â  Â  toggleBold() { this.state.bold = !this.state.bold; this.applyDisplaySettings(); this.saveState(); }
Â  Â  Â  Â  adjustSize(d) { this.state.size = Math.max(12, Math.min(24, this.state.size + d)); this.applyDisplaySettings(); this.saveState(); }

Â  Â  Â  Â  /* --- AI FUNCTIONS --- */
Â  Â  Â  Â  async callGemini(prompt) {
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  const res = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  method: 'POST', headers: {'Content-Type': 'application/json'},
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  const data = await res.json();
Â  Â  Â  Â  Â  Â  Â  Â  return data.candidates?.[0]?.content?.parts?.[0]?.text;
Â  Â  Â  Â  Â  Â  } catch { return null; }
Â  Â  Â  Â  }

Â  Â  Â  Â  async sendChat() {
Â  Â  Â  Â  Â  Â  const inp = document.getElementById('chatInput');Â 
Â  Â  Â  Â  Â  Â  const txt = inp.value;Â 
Â  Â  Â  Â  Â  Â  if(!txt) return;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  document.getElementById('chatBody').innerHTML += `<div class="msg-bubble msg-user">${txt}</div>`;
Â  Â  Â  Â  Â  Â  inp.value = '';
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const systemContext = `
Â  Â  Â  Â  Â  Â  Â  Â  Sei CronoAI, l'assistente di sistema di Cronoshop.
Â  Â  Â  Â  Â  Â  Â  Â  PUOI ESEGUIRE AZIONI REALI SULL'APP.
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Se l'utente chiede di fare qualcosa (es. "cambia tema in scuro", "aggiungi iphone al carrello", "svuota carrello"),Â 
Â  Â  Â  Â  Â  Â  Â  Â  DEVI rispondere SOLO con un JSON in questo formato:
Â  Â  Â  Â  Â  Â  Â  Â  {"action": "set_theme", "value": "dark"}Â  // value: light, dark, sunset, forest, ocean, cyber
Â  Â  Â  Â  Â  Â  Â  Â  {"action": "add_cart", "query": "iphone"} // query: nome prodotto da cercare
Â  Â  Â  Â  Â  Â  Â  Â  {"action": "clear_cart"}
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Se l'utente chiede info o consigli, rispondi normalmente in italiano.
Â  Â  Â  Â  Â  Â  `;

Â  Â  Â  Â  Â  Â  const res = await this.callGemini(`${systemContext}\nUtente: "${txt}"`);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  const jsonMatch = res.match(/\{.*"action":.*\}/s);
Â  Â  Â  Â  Â  Â  Â  Â  if(jsonMatch) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const command = JSON.parse(jsonMatch[0]);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.executeCommand(command);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('chatBody').innerHTML += `<div class="msg-bubble msg-ai">Fatto! ğŸ‘</div>`;
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('chatBody').innerHTML += `<div class="msg-bubble msg-ai">${res}</div>`;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  } catch {
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('chatBody').innerHTML += `<div class="msg-bubble msg-ai">${res}</div>`;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  executeCommand(cmd) {
Â  Â  Â  Â  Â  Â  if(cmd.action === 'set_theme') {
Â  Â  Â  Â  Â  Â  Â  Â  if(presets[cmd.value]) this.applyTheme(cmd.value);
Â  Â  Â  Â  Â  Â  Â  Â  else this.showNotification("Tema non trovato", "error");
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  if(cmd.action === 'add_cart') {
Â  Â  Â  Â  Â  Â  Â  Â  const p = products.find(prod => prod.nome.toLowerCase().includes(cmd.query.toLowerCase()));
Â  Â  Â  Â  Â  Â  Â  Â  if(p) this.addToCart(p.id);
Â  Â  Â  Â  Â  Â  Â  Â  else this.showNotification("Prodotto non trovato", "error");
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  if(cmd.action === 'clear_cart') {
Â  Â  Â  Â  Â  Â  Â  Â  this.state.cart = [];
Â  Â  Â  Â  Â  Â  Â  Â  this.saveState(); this.updateBadges(); this.refreshViews();
Â  Â  Â  Â  Â  Â  Â  Â  this.showNotification("Carrello svuotato", "info");
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- THEME & VISUAL GENERATORS --- */
Â  Â  Â  Â  openAiPrompt(type) {
Â  Â  Â  Â  Â  Â  this.state.promptType = type;
Â  Â  Â  Â  Â  Â  document.getElementById('aiPromptTitle').innerText = type === 'theme' ? 'Crea un Tema' : 'Ottimizzazione Visiva';
Â  Â  Â  Â  Â  Â  document.getElementById('aiPromptDesc').innerText = type === 'theme' ? 'Descrivi l\'atmosfera (es. "Tramonto Cyberpunk")' : 'Descrivi le tue esigenze (es. "Fatico a leggere di notte")';
Â  Â  Â  Â  Â  Â  document.getElementById('aiPromptOverlay').classList.add('open');
Â  Â  Â  Â  }
Â  Â  Â  Â  closeAiPrompt() { document.getElementById('aiPromptOverlay').classList.remove('open'); }

Â  Â  Â  Â  async submitAiPrompt() {
Â  Â  Â  Â  Â  Â  const txt = document.getElementById('aiPromptInput').value;
Â  Â  Â  Â  Â  Â  if(!txt) return;
Â  Â  Â  Â  Â  Â  this.closeAiPrompt();
Â  Â  Â  Â  Â  Â  this.showNotification("L'AI sta lavorando...", "info");

Â  Â  Â  Â  Â  Â  if (this.state.promptType === 'theme') {
Â  Â  Â  Â  Â  Â  Â  Â  const prompt = `Genera un JSON valido (senza markdown) per un tema UI basato su: "${txt}". Keys: bg, card, text, primary, accent. Usa colori HEX.`;
Â  Â  Â  Â  Â  Â  Â  Â  const res = await this.callGemini(prompt);
Â  Â  Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const jsonStr = res.replace(/```json|```/g, '').trim();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const theme = JSON.parse(jsonStr);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.applyTheme(theme);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.showNotification("Tema Creato!", "success");
Â  Â  Â  Â  Â  Â  Â  Â  } catch { this.showNotification("Errore creazione tema", "error"); }
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  const prompt = `Utente dice: "${txt}". Suggerisci JSON valido (senza markdown) per settings UI: size (int 14-22), bold (bool), highContrast (bool).`;
Â  Â  Â  Â  Â  Â  Â  Â  const res = await this.callGemini(prompt);
Â  Â  Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const jsonStr = res.replace(/```json|```/g, '').trim();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const settings = JSON.parse(jsonStr);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.state.size = settings.size || 17;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.state.bold = settings.bold || false;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.applyDisplaySettings();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.showNotification("Display Ottimizzato!", "success");
Â  Â  Â  Â  Â  Â  Â  Â  } catch { this.showNotification("Errore ottimizzazione", "error"); }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- SHOPPING --- */
Â  Â  Â  Â  addToCart(id) {
Â  Â  Â  Â  Â  Â  const p = products.find(x=>x.id===id);
Â  Â  Â  Â  Â  Â  const exist = this.state.cart.find(x=>x.id===id);
Â  Â  Â  Â  Â  Â  if(exist) exist.qty++; else this.state.cart.push({...p, qty:1});
Â  Â  Â  Â  Â  Â  this.saveState(); this.updateBadges(); this.showNotification("Aggiunto al carrello", "success");
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  generateCartMix() {
Â  Â  Â  Â  Â  Â  if(!this.state.cart.length) return alert('Carrello vuoto!');
Â  Â  Â  Â  Â  Â  const items = this.state.cart.map(x=>x.nome).join(', ');
Â  Â  Â  Â  Â  Â  this.callGemini(`Ho nel carrello: ${items}. Dammi un consiglio creativo su come usarli insieme. Max 20 parole.`).then(res => alert(res));
Â  Â  Â  Â  }

Â  Â  Â  Â  toggleWishlist(id) {
Â  Â  Â  Â  Â  Â  const idx = this.state.wishlist.findIndex(x => x.id === id);
Â  Â  Â  Â  Â  Â  if(idx > -1) {
Â  Â  Â  Â  Â  Â  Â  Â  this.state.wishlist.splice(idx, 1);
Â  Â  Â  Â  Â  Â  Â  Â  this.showNotification("Rimosso dai preferiti");
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  const p = products.find(x => x.id === id);
Â  Â  Â  Â  Â  Â  Â  Â  if(p) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.state.wishlist.push(p);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.showNotification("Aggiunto ai preferiti", "success");
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  this.saveState();
Â  Â  Â  Â  Â  Â  this.updateBadges();
Â  Â  Â  Â  Â  Â  if(this.state.view === 'wishlist') this.renderWishlist();
Â  Â  Â  Â  Â  Â  this.updateModalHeart(id);
Â  Â  Â  Â  }

Â  Â  Â  Â  updateModalHeart(id) {
Â  Â  Â  Â  Â  Â  const btn = document.getElementById('btnAddToWish');
Â  Â  Â  Â  Â  Â  if(!btn) return;
Â  Â  Â  Â  Â  Â  const inWish = this.state.wishlist.some(x => x.id === id);
Â  Â  Â  Â  Â  Â  const icon = btn.querySelector('i');
Â  Â  Â  Â  Â  Â  if(inWish) {
Â  Â  Â  Â  Â  Â  Â  Â  icon.classList.remove('ph'); icon.classList.add('ph-fill');
Â  Â  Â  Â  Â  Â  Â  Â  icon.style.color = '#FF3B30';
Â  Â  Â  Â  Â  Â  Â  Â  btn.style.color = '#FF3B30';
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  icon.classList.remove('ph-fill'); icon.classList.add('ph');
Â  Â  Â  Â  Â  Â  Â  Â  icon.style.color = 'inherit';
Â  Â  Â  Â  Â  Â  Â  Â  btn.style.color = 'inherit';
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  updateQty(id, delta) {
Â  Â  Â  Â  Â  Â  const item = this.state.cart.find(x => x.id === id);
Â  Â  Â  Â  Â  Â  if(item) {
Â  Â  Â  Â  Â  Â  Â  Â  item.qty = (item.qty || 1) + delta;
Â  Â  Â  Â  Â  Â  Â  Â  if(item.qty <= 0) this.state.cart = this.state.cart.filter(x => x.id !== id);
Â  Â  Â  Â  Â  Â  Â  Â  this.saveState();
Â  Â  Â  Â  Â  Â  Â  Â  this.renderCart();Â 
Â  Â  Â  Â  Â  Â  Â  Â  this.updateBadges();
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  updateBadges() {Â 
Â  Â  Â  Â  Â  Â  const qty = this.state.cart.reduce((a,b)=>a+(b.qty||1),0);
Â  Â  Â  Â  Â  Â  document.querySelectorAll('#badge-cart, #header-badge-cart').forEach(e => { e.innerText = qty; e.style.display = qty ? 'block':'none'; });
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const wQty = this.state.wishlist.length;
Â  Â  Â  Â  Â  Â  const wBadge = document.getElementById('badge-wishlist');
Â  Â  Â  Â  Â  Â  if(wBadge) { wBadge.innerText = wQty; wBadge.style.display = wQty ? 'block':'none'; }
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- NAVIGATION & UI --- */
Â  Â  Â  Â  navigate(view) {
Â  Â  Â  Â  Â  Â  // AUTH GUARD PER IMPOSTAZIONI
Â  Â  Â  Â  Â  Â  if(view === 'settings' && !this.state.currentUser) {
Â  Â  Â  Â  Â  Â  Â  Â  this.openAuth();
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active'));
Â  Â  Â  Â  Â  Â  const target = document.getElementById('view-'+view);
Â  Â  Â  Â  Â  Â  if(target) target.classList.add('active');
Â  Â  Â  Â  Â  Â  this.state.view = view;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
Â  Â  Â  Â  Â  Â  const nav = document.getElementById('nav-'+view); if(nav) nav.classList.add('active');
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  document.getElementById('pageTitle').innerText = view.charAt(0).toUpperCase() + view.slice(1);
Â  Â  Â  Â  Â  Â  document.getElementById('sidebar').classList.remove('active');
Â  Â  Â  Â  Â  Â  document.getElementById('sidebarScrim').classList.remove('active');
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if(view === 'cart') this.renderCart();
Â  Â  Â  Â  Â  Â  if(view === 'wishlist') this.renderWishlist();
Â  Â  Â  Â  Â  Â  if(view === 'settings') this.updateProfileUI();
Â  Â  Â  Â  }

Â  Â  Â  Â  renderProducts() { this.renderGrid(products, 'homeGrid'); this.renderGrid(products, 'productsGrid'); }
Â  Â  Â  Â  renderGrid(list, target) {
Â  Â  Â  Â  Â  Â  document.getElementById(target).innerHTML = list.map(p => `
Â  Â  Â  Â  Â  Â  Â  Â  <div class="product-card" onclick="app.openProductModal('${p.id}')">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="product-img-wrap"><img src="${p.img}" class="product-img"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="product-details"><div class="product-name">${p.nome}</div><div class="product-price">â‚¬${p.prezzo}</div></div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>`).join('');
Â  Â  Â  Â  }

Â  Â  Â  Â  openProductModal(id) {
Â  Â  Â  Â  Â  Â  const p = products.find(x=>x.id===id);
Â  Â  Â  Â  Â  Â  if(!p) return;
Â  Â  Â  Â  Â  Â  this.currentProduct = p;
Â  Â  Â  Â  Â  Â  document.getElementById('modalTitle').innerText = p.nome;
Â  Â  Â  Â  Â  Â  document.getElementById('modalPrice').innerText = 'â‚¬'+p.prezzo;
Â  Â  Â  Â  Â  Â  document.getElementById('modalDesc').innerText = p.descrizione;
Â  Â  Â  Â  Â  Â  document.getElementById('aiResponse').style.display = 'none';
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  document.getElementById('btnAddToCart').onclick = () => { this.addToCart(id); this.closeModal(); };
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const wishBtn = document.getElementById('btnAddToWish');
Â  Â  Â  Â  Â  Â  wishBtn.onclick = () => { this.toggleWishlist(id); };
Â  Â  Â  Â  Â  Â  this.updateModalHeart(id);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  document.getElementById('productDialog').classList.add('open');
Â  Â  Â  Â  }
Â  Â  Â  Â  closeModal() { document.getElementById('productDialog').classList.remove('open'); }
Â  Â  Â  Â  toggleSidebar() { document.getElementById('sidebar').classList.toggle('active'); document.getElementById('sidebarScrim').classList.toggle('active'); }
Â  Â  Â  Â Â 
Â  Â  Â  Â  showNotification(m, t) {
Â  Â  Â  Â  Â  Â  const d = document.createElement('div');
Â  Â  Â  Â  Â  Â  d.style.cssText = `position:fixed;bottom:20px;left:50%;transform:translateX(-50%);background:${t==='success'?'var(--primary)':(t==='error'?'#FF3B30':'#333')};color:white;padding:12px 24px;border-radius:50px;box-shadow:var(--glass-shadow);z-index:9999;font-weight:600;animation:slideUp 0.3s;font-size:0.9em;`;
Â  Â  Â  Â  Â  Â  d.innerText = m; document.body.appendChild(d); setTimeout(()=>d.remove(), 2500);
Â  Â  Â  Â  }

Â  Â  Â  Â  renderCart() {
Â  Â  Â  Â  Â  Â  const c = document.getElementById('cartListContainer');
Â  Â  Â  Â  Â  Â  if(!this.state.cart.length) { c.innerHTML = '<div style="text-align:center;padding:40px;color:var(--text-sec);">Vuoto</div>'; document.getElementById('cartSummary').style.display='none'; return; }
Â  Â  Â  Â  Â  Â  document.getElementById('cartSummary').style.display='block';
Â  Â  Â  Â  Â  Â  c.innerHTML = this.state.cart.map(i => `
Â  Â  Â  Â  Â  Â  Â  Â  <div style="display:flex; gap:15px; margin-bottom:15px; background:var(--glass-bg); padding:10px; border-radius:12px; border:1px solid var(--separator); align-items:center;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <img src="${i.img}" style="width:60px; height:60px; object-fit:contain;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="flex:1;"><b>${i.nome}</b><br>â‚¬${i.prezzo}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="display:flex; align-items:center; gap:8px;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="ios-btn btn-secondary" style="width:30px; height:30px; padding:0;" onclick="app.updateQty('${i.id}', -1)">-</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>${i.qty||1}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="ios-btn btn-secondary" style="width:30px; height:30px; padding:0;" onclick="app.updateQty('${i.id}', 1)">+</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>`).join('');
Â  Â  Â  Â  Â  Â  document.getElementById('cartTotal').innerText = 'â‚¬'+this.state.cart.reduce((a,b)=>a+b.prezzo*(b.qty||1),0).toFixed(2);
Â  Â  Â  Â  }

Â  Â  Â  Â  renderWishlist() {Â 
Â  Â  Â  Â  Â  Â  const container = document.getElementById('wishlistContainer');
Â  Â  Â  Â  Â  Â  if(this.state.wishlist.length === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  container.innerHTML = '<div style="grid-column:1/-1; text-align:center; padding:40px; color:var(--text-sec);">Nessun preferito</div>';
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  container.innerHTML = this.state.wishlist.map(p => `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="product-card">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="padding:15px; display:flex; align-items:center; gap:15px;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <img src="${p.img}" style="width:60px; height:60px; object-fit:contain;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="flex:1;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="product-name">${p.nome}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="product-price">â‚¬${p.prezzo}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="ios-btn btn-secondary" style="width:auto; padding:8px;" onclick="app.addToCart('${p.id}'); app.toggleWishlist('${p.id}')">ğŸ›’</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="ios-btn btn-secondary" style="width:auto; padding:8px; color:#FF3B30;" onclick="app.toggleWishlist('${p.id}')"><i class="ph-fill ph-trash"></i></button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  `).join('');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  refreshViews() {
Â  Â  Â  Â  Â  Â  if(this.state.view === 'cart') this.renderCart();
Â  Â  Â  Â  Â  Â  if(this.state.view === 'wishlist') this.renderWishlist();
Â  Â  Â  Â  }

Â  Â  Â  Â  /* DRAGGABLE CHAT */
Â  Â  Â  Â  initDraggableChat() {
Â  Â  Â  Â  Â  Â  const el = document.getElementById('chatOverlay'); const h = document.getElementById('chatHeader');
Â  Â  Â  Â  Â  Â  let isDown = false, offX, offY;
Â  Â  Â  Â  Â  Â  h.addEventListener('mousedown', (e) => { isDown = true; offX = el.offsetLeft - e.clientX; offY = el.offsetTop - e.clientY; });
Â  Â  Â  Â  Â  Â  document.addEventListener('mouseup', () => isDown = false);
Â  Â  Â  Â  Â  Â  document.addEventListener('mousemove', (e) => {
Â  Â  Â  Â  Â  Â  Â  Â  if(!isDown) return; e.preventDefault();
Â  Â  Â  Â  Â  Â  Â  Â  el.style.left = (e.clientX + offX) + 'px'; el.style.top = (e.clientY + offY) + 'px';
Â  Â  Â  Â  Â  Â  Â  Â  el.style.bottom = 'auto'; el.style.right = 'auto';
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }
Â  Â  Â  Â  toggleChat() { document.getElementById('chatOverlay').classList.toggle('open'); }
Â  Â  Â  Â  async askAI() {
Â  Â  Â  Â  Â  Â  const res = await this.callGemini(`Analizza brevemente il prodotto mostrato. Dammi 3 pro.`);
Â  Â  Â  Â  Â  Â  const box = document.getElementById('aiResponse'); box.style.display='block'; box.innerHTML = `<b>AI:</b> ${res}`;
Â  Â  Â  Â  }
Â  Â  }

Â  Â  const app = new App();
</script>
</body>
</html> mi puoi dividere questo codice in 4 file? index.html, script.js, main.js con i prodotti e style.css senza perdere parti
